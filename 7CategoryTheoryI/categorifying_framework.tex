%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{
Categorification of world states and their transformations
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Recap.}
In our original framework, we defined an atomic multidigraph
\begin{equation}
    \hat{\mathscr{W}} = (W, \hat{D}, \hat{s}, \hat{t})
\end{equation}
consisting of
\begin{enumerate}
    \item a set $W$ of world states;
    \item a set $\hat{D}$ of atomic transformations; and
    \item source and target maps $\hat{s}, \hat{t}: \hat{D} \to W$.
\end{enumerate}

We generate the set $D$ of transformations by taking all finite directed walks in $\hat{\mathscr{W}}$ with composition $\circ$ given by concatenation of directed walks.
The trivial walks $1_{w} \in D$ for each $w \in W$ (called trivial transformations) serve as identities.
We then define the world $\mathscr{W}$ as the multidigraph
\begin{equation}
    \mathscr{W} = (W, D, s, t)
\end{equation}
where $s, t: D \to W$ are source and target maps.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Categorical conversion.}

In the category theoretic version of our framework, a world $\mathscr{W}$ is the \emph{free category} $\mathcal{F}(\hat{\mathscr{W}})$ generated by the atomic multidigraph $\hat{\mathscr{W}}$:\footnote{
    In both the construction of the world $\mathscr{W}$ from the atomic multidigraph $\hat{\mathscr{W}}$ in our original framework and in the construction of the free category $\mathcal{F}(\hat{\mathscr{W}})$ from the atomic multidigraph $\hat{\mathscr{W}}$ in the categorical conversion of our framework, we freely generate the walks in the graph theory sense (i.e., allowing repetition of vertices and edges) over $\hat{\mathscr{W}}$.
    }
\begin{equation}
    \mathscr{W} := \mathcal{F}(\hat{\mathscr{W}}).
\end{equation}
where $\mathcal{F}$ is the free category functor.
We call $\mathcal{F}(\hat{\mathscr{W}})$ a \emph{category of world states}.
The data of the category $\mathcal{F}(\hat{\mathscr{W}})$ of world states are
\begin{enumerate}
    \item \textbf{Objects:}
    The world states in $W$.
    \begin{equation}
        \text{Ob}(\mathcal{F}(\hat{\mathscr{W}})) := W
    \end{equation}
    \item \textbf{Morphisms:}
    The transformations in $D$.
    \begin{equation}
        \text{Hom}_{\mathcal{F}(\hat{\mathscr{W}})}(w, w') = \{ d \in D \mid s(d) = w \text{ and } t(d) = w' \}.
    \end{equation}
    The identity morphisms of $\mathcal{F}(\hat{\mathscr{W}})$ are the trivial transformations $1_{w}$, and composition of morphisms is concatenation of paths.
\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Subworlds.}

\newthought{The conditions for} a subworld in our framework are precisely the conditions that define a subcategory:
\begin{equation}
    \mathscr{W}' \subseteq \mathscr{W} \iff \mathcal{F}(\hat{\mathscr{W}}') \subseteq \mathcal{F}(\hat{\mathscr{W}})
\end{equation}

The reachable subworld $\mathscr{W}^{\to}(w)$ of a world $\mathscr{W}$ is the \emph{full subcategory} of $\mathscr{W}$ on the objects $W^{\to}(w)$.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{
Categorification of the actions of an agent
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Recap.}
We introduce an agent
\begin{equation}
    \mathscr{A} = (\hat{A}, \mathscr{Z}, b, h),
\end{equation}
where $\hat{A}$ is the set of atomic actions of the agent, $\mathscr{Z}$ is the agent's representation, $b$ is the agent's observation process, and $h$ is the agent's inference process.

The set $\hat{A}^{*}$ of actions of the agent is generated by taking the Kleene star operator of the set $\hat{A}$ of atomic actions.

Let $\hat{D}_{A} \subset D$ be the set of transformations that are caused by the atomic actions in $\hat{A}$; we call $\hat{D}_{A}$ the set of \emph{atomic action transformations}.
We define a labelling map
\begin{equation}
    \hat{l}: \hat{D}_{A} \to \hat{A}
\end{equation}
such that any two distinct atomic transformations leaving the same world state are labelled with different actions:
\begin{equation}
  \text{If } s(d) = s(d'), \text{ then } \hat{l}(d) \neq \hat{l}(d') \quad \text{for any } d, d' \in \hat{D}_{A}.
\end{equation}
We call $\hat{l}$ the \emph{atomic action labelling map}.
We extend $\hat{l}$ to an \emph{action labelling map} $l: D_{A} \to \hat{A}^{*}$ such that $l$ satisfies the following conditions:
\begin{enumerate}
    \item \textbf{Uniqueness.}
    For any $d,d' \in D_{A}$ with $s(d)=s(d')$, $l(d) \neq l(d')$.

    \item \textbf{Identity.}
    $l(1_{w}) = \varepsilon$ for all $w \in W$.

    \item \textbf{Composition consistency.}
    If $d = \hat{d}_{n} \circ ... \circ \hat{d}_{1}$ then $l(d) = \hat{l}(\hat{d}_{n}) ... \hat{l}(\hat{d}_{1})$ for all $d \in D_{A}$ and for all $\hat{d_{1}}, \dots , \hat{d_{n}} \in \hat{D}_{A}$.
\end{enumerate}

To construct the world with transformations due to the actions of the agent $\mathscr{A}$ we take the set $\hat{D}_{A} \subseteq D$ of transformations due to the atomic actions of the agent and use it to construct the atomic multidigraph of the actions of the agent
\begin{equation}
    \hat{\mathscr{W}}_{\mathscr{A}} = (W, \hat{D}_{A}, s, t).
\end{equation}
Then we construct the world with transformations due to the actions of the agent by taking all finite direct walks in $\hat{\mathscr{W}}_{\mathscr{A}}$ and constructing the multidigraph
\begin{equation}
    \mathscr{W}_{\mathscr{A}} = (W, D_{A}, s, t).
\end{equation}
where $\mathscr{W}_{\mathscr{A}} \subseteq \mathscr{W}$.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Categorical conversion.}
\newthought{We construct the} free category\footnote{
The free category $\mathcal{F}(Q)$ of a multidigraph is the most general category that can be made from a multidigraph by allowing composition of walks \draftnote{blue}{continue}{}
}
\begin{equation}
    \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}).
\end{equation}
which is is a subcategory of $\mathcal{F}(\hat{\mathscr{W}})$:
\begin{equation}
    \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}) \subseteq \mathcal{F}(\hat{\mathscr{W}}).
\end{equation}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Categorising the monoid $\hat{A}^{*}$.}

\newthought{To "categorify" the} monoid $\hat{A}^{*}$, we construct the delooping of $\hat{A}^{*}$,
\begin{equation}
    \hat{A}^{*} \xrightarrow{\text{deloop}} \mathbf{B}\hat{A}^{*},
\end{equation}
which is the category $\mathbf{B}\hat{A}^{*}$ consisting of
\begin{enumerate}
    \item \textbf{Objects.}
    There is a single object
    \begin{equation}
        \text{Ob}(\mathbf{B}\hat{A}^{*}) = \{ \bullet \}
    \end{equation}
    \item \textbf{Morphism.}
    The hom-set $\text{Hom}(\bullet, \bullet)$ is given by the elements of $\hat{A}^{*}$
    \begin{equation}
        \text{Hom}(\bullet, \bullet) = \hat{A}^{*}
    \end{equation}
    \item \textbf{Composition.}
    The composition of morphisms is defined by the action composition operator $\circ$.
    \item \textbf{Identity.}
    The identity morphism is the empty action $\varepsilon$.
\end{enumerate}


\newthought{We can use} the atomic labelling map
\begin{equation}
    \hat{l}: \hat{D}_{A} \to \hat{A}
\end{equation}
to construct a multidigraph morphism $l_{Q}: \hat{\mathscr{W}}_{\mathscr{A}} \to U(\mathbf{B}\hat{A}^{*})$ defined by:
\begin{enumerate}
    \item \textbf{Objects:}
    For every $w \in W$,
    \begin{equation}
        l_{Q}(w) = \bullet;
    \end{equation}
    \item \textbf{Arrows:}
    For every $\hat{d} \in \hat{D}_{A}$,
    \begin{equation}
        l_{Q}(\hat{d}) = \hat{l}(\hat{d}).
    \end{equation}
\end{enumerate}
Due to the free-forgetful adjunction
\begin{equation}
    \mathcal{F}: \cat{Quiv} \leftrightarrows \cat{Cat}: U.
\end{equation}
formed by the free category functor $\mathcal{F}$ and the forgetful functor $U$, we have, from the universal property of free categories, that for the category $\mathbf{B}\hat{A}^{*} \in \cat{Cat}$ and multidigraph morphism $l_{Q}: \hat{\mathscr{W}}_{\mathscr{A}} \to U(\mathbf{B}\hat{A}^{*})$ in $\cat{Quiv}$, there exists a unique functor\footnote{
    The universal property of free categories also provides the natural bijection
    \begin{equation}
        \text{Hom}_{\cat{Quiv}}(\hat{\mathscr{W}}, U(\mathbf{B}\hat{A}^{*})) \cong \text{Hom}_{\cat{Cat}}(\mathcal{F}(\hat{\mathscr{W}}), \mathbf{B}\hat{A}^{*}),
    \end{equation}
    which means that
    \begin{enumerate}
        \item every functor $\mathcal{F}(\hat{\mathscr{W}}) \to \mathbf{B}\hat{A}^{*}$ in $\cat{Cat}$ corresponds to a unique multidigraph morphism $\hat{\mathscr{W}} \to U(\mathbf{B}\hat{A}^{*})$ (namely $G = U(G') \circ \eta_{\hat{\mathscr{W}}}$) in $\cat{Quiv}$; and
        \item every multidigraph morphism $\hat{\mathscr{W}} \to U(\mathbf{B}\hat{A}^{*})$ in $\cat{Quiv}$ corresponds to a unique functor $\mathcal{F}(\hat{\mathscr{W}}) \to \mathbf{B}\hat{A}^{*}$ in $\cat{Cat}$.
    \end{enumerate}
}
\begin{equation}
    L : \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}) \to \mathbf{B}\hat{A}^{*}
\end{equation}
such that\footnote{
    $\eta_{\hat{\mathscr{W}}_{\mathscr{A}}}$ is the $\hat{\mathscr{W}}_{\mathscr{A}}$-component of the unit natural transformation $\eta: \text{id}_{\cat{Quiv}} \Rightarrow U \circ \mathcal{F}$ of the adjunction $\mathcal{F}: \cat{Quiv} \leftrightarrows \cat{Cat}: U$.
}
\begin{equation}
    U(L) \circ \eta_{\hat{\mathscr{W}}_{\mathscr{A}}} = l_{Q};
\end{equation}
this universal property gives the following diagram:\footnote{
    $U(\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}))$ is exactly the multidigraph $\mathscr{W}_{\mathscr{A}}$ (without the composition $\circ$).
}
\begin{equation}
    % https://q.uiver.app/#q=WzAsNyxbMiwxLCJcXGhhdHtcXG1hdGhzY3J7V319X3tcXG1hdGhzY3J7QX19Il0sWzIsMiwiVShcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fSkpIl0sWzQsMSwiXFxtYXRoY2Fse0Z9KFxcaGF0e1xcbWF0aHNjcntXfX1fe1xcbWF0aHNjcntBfX0pIl0sWzIsMCwiXFx0ZXh0e0luICRcXGNhdHtRdWl2fSQ6fSJdLFs0LDAsIlxcdGV4dHtJbiAkXFxjYXR7Q2F0fSR9OiJdLFswLDIsIlUoXFx0ZXh0YmZ7Qn1cXGhhdHtBfV57Kn0pIl0sWzQsMiwiXFx0ZXh0YmZ7Qn1cXGhhdHtBfV57Kn0iXSxbMCwxLCJcXGV0YV97XFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fX0iXSxbMCwyLCJGIiwwLHsiY3VydmUiOi0yLCJjb2xvdXIiOlswLDYwLDYwXX0sWzAsNjAsNjAsMV1dLFsyLDEsIlUiLDIseyJjb2xvdXIiOlsxMjAsNjAsNjBdfSxbMTIwLDYwLDYwLDFdXSxbMCw1LCJsX3tRfSIsMl0sWzYsNSwiVSIsMCx7Im9mZnNldCI6LTEsImN1cnZlIjotMiwiY29sb3VyIjpbMTIwLDYwLDYwXX0sWzEyMCw2MCw2MCwxXV0sWzEsNSwiXFxleGlzdHMhIFxcOyBVKEwpIiwyLHsibGFiZWxfcG9zaXRpb24iOjQwLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMiw2LCJcXGV4aXN0cyEgXFw7IEwiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
\begin{tikzcd}[ampersand replacement=\&]
    \&\& {\text{In $\cat{Quiv}$:}} \&\& {\text{In $\cat{Cat}$}:} \\
    \&\& {\hat{\mathscr{W}}_{\mathscr{A}}} \&\& {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})} \\
    {U(\mathbf{B}\hat{A}^{*})} \&\& {U(\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}))} \&\& {\mathbf{B}\hat{A}^{*}}
    \arrow["F", color={rgb,255:red,214;green,92;blue,92}, curve={height=-12pt}, from=2-3, to=2-5]
    \arrow["{l_{Q}}"', from=2-3, to=3-1]
    \arrow["{\eta_{\hat{\mathscr{W}}_{\mathscr{A}}}}", from=2-3, to=3-3]
    \arrow["U"', color={rgb,255:red,92;green,214;blue,92}, from=2-5, to=3-3]
    \arrow["{\exists! \; L}", dashed, from=2-5, to=3-5]
    \arrow["{\exists! \; U(L)}"'{pos=0.4}, dashed, from=3-3, to=3-1]
    \arrow["U", shift left, color={rgb,255:red,92;green,214;blue,92}, curve={height=-12pt}, from=3-5, to=3-1]
\end{tikzcd}
\end{equation}

We call the unique functor $L$ that we have constructed the \emph{action labelling functor}, which is defined as:
\begin{enumerate}
    \item \textbf{Objects:}
    each object $w \in W$ of $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$ to $\bullet \in \mathbf{B}$ of $\mathbf{B}\hat{A}^{*}$
    \begin{equation}
        L(w) = \bullet \quad \text{for all $w \in W$};
    \end{equation}
    
    \item \textbf{Morphisms:}
    each morphism $d \in \text{Hom}(w,w')$ in $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$ to a morphism $L(d) \in \hat{A}^{*}$ in $\mathbf{B}\hat{A}^{*}$ such that\footnote{
        Note that the unique functor $L$ automatically satisfies the identity and composition consistency conditions of our action labelling map $l$ !
    }
    \begin{enumerate}
        \item \textbf{Identity:}
        \begin{equation}
            L(1_{w}) = \varepsilon \quad \text{for all $w \in W$};
        \end{equation}
        \item \textbf{Composition:}
        for $d = \hat{d}_{n} \circ \dots \circ \hat{d}_{1}$,
        \begin{equation}
            L(d) = \hat{l}(\hat{d}_{n}) \circ \dots \circ \hat{l}(\hat{d}_{1}).
        \end{equation}
    \end{enumerate}
\end{enumerate}

The uniqueness condition on the atomic labelling map $\hat{l}$ is inherited by $L$; in categorical terms, the action labelling functor $L$ is \emph{faithful}, which means that for any two objects $w, w' \in W$, the induced map on Hom-sets
\begin{equation}
    L_{w,w'} : \text{Hom}_{\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})}(w, w') \to \text{Hom}_{\mathbf{B}\hat{A}^{*}}(\bullet, \bullet) = \hat{A}^{*}
\end{equation}
is injective\footnote{
    A consequence of this is that no distinct sequences of atomic actions are "identified" (i.e., treated the same) under $L$.
}.
The faithfulness of $L$ means that $L$ embeds the structure of $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$ into $\mathbf{B}\hat{A}^{*}$, and so the transformations (morphisms) in $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$ inherit the algebraic structure of $\hat{A}^{*}$ through the labelling.

On the level of endomorphisms, $L$ gives a monoid homomorphism
\begin{equation}
    L_{w}: \text{End}(w) \to \hat{A}^{*}
\end{equation}
that embeds the action monoid at a state into the free monoid $\hat{A}^{*}$.

\begin{notation}
    In category theory diagrams, we use a $\hookrightarrow$ to denote an \emph{inclusion functor}, which is a functor that is faithful embedding.
    Therefore, we can write the action labelling functor $L$ as
    \begin{equation}
        L: \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}) \hookrightarrow \mathbf{B}\hat{A}^{*}.
    \end{equation}
\end{notation}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{
Categorification of totalisation and the effect of actions
}
\draftnote{purple}{To do}{
\begin{enumerate}
    \item Prove in original framework that $\ast^{\bot}$ satisfies
    \begin{equation}
        (a' \circ a) \ast^{\bot} w = a' \ast^{\bot} (a \ast^{\bot} w)
    \end{equation}
    for all $a, a' \in \hat{A}^{*}$ and for all $w \in W$
    \item Need that $\Delta^{\bot}$ is closed under composition with $\delta_{a}$.
    So, explicitly define composition rules for composing $\delta_{a}$ and $d^{\bot}$.
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Recap.}
\newthought{We have an} action effect operator
\begin{equation}
    \ast: \hat{A}^{*} \times W \to W,
\end{equation}
such that
\begin{enumerate}
	\item if there exists a $d: w \xrightarrow{a} t(d)$, then $a \ast w = t(d)$; and
	\item if there does not exist a $d: w \xrightarrow{a} t(d)$, then we say that $a \ast w$ is \emph{undefined}.
\end{enumerate}
that encodes how actions in $\hat{A}^{*}$ acts on states in $W$.
Since $\hat{A}^{*}$ is a monoid, $\ast$ is a partial monoid action on the set $W$ of world states.

\newthought{We can \emph{curry}}\footnote{
    Currying is an operation that allows us to transform an operation with multiple arguments into a collection of functions with single arguments by fixing all but one of the operation's arguments.
} the action effect operator $\ast : \hat{A}^{*} \times W \to W$
\begin{equation}
	\operatorname{Curry}: (\ast: \hat{A}^{*} \times W \to W) \to (f_{a}: W \to W)
\end{equation}
to obtain a collection of (partial) functions
\begin{equation}
	\mathcal{T}_{\hat{A}^{*}} = \{f_{a}: W \to W \mid f_{a}(w) = a \ast w \text{ where defined, for each } a \in \hat{A}^{*} \}.
\end{equation}

\newthought{To handle undefined actions} we totalised our action effect operator $\ast$ by 
\begin{enumerate}
    \item augmenting our set $W$ with an undefined state $\bot$ to give
    \begin{equation}
        W^{\bot} = W \cup \bot;
    \end{equation}
    \item augmenting the set $D_{A}$ of transformations due to the actions of the agent $\mathscr{A}$ to a set $D_{A}^{\bot}$, which includes transformations for the behaviour of $\ast^{\bot}$ where previously $\ast$ was undefined:
    \begin{alignat}{2}
        & U {}={} && \{ (a,w) \in \hat{A}^{*} \times W \mid \not\exists (d: w \xrightarrow{a} t(d)) \in D_{A} \} \\
        & \Delta^{\bot} {}={} && \{ d^{\bot}: w \xrightarrow{a} \bot \mid (a, w) \in U \}                                       \\
                      &       && \cup \{ d^{\bot}: \bot \xrightarrow{a} \bot \text{ for all $a \in \hat{A}^{*}$} \} \\
        & D_{A}^{\bot} = && D \cup \Delta^{\bot};
    \end{alignat}
    \item extending our action labelling map $l: D_{A} \to \hat{A}^{*}$ label our new $\bot$-terminating transformations in $D_{A}^{\bot} $:
    \begin{align}
         & l^{\bot} : D_{A}^{\bot} \to \hat{A}^{*} \quad\text{such that} \\
         & l^{\bot}(d) =
        \begin{cases}
            l(d) & \text{if $d \in D_{A}$}, \\
            a    & \text{if $d \in \Delta^{\bot}$ and $d: s(d) \xrightarrow{a} \bot$.}
        \end{cases}
    \end{align}
\end{enumerate}

These augmentations allow us to extend the action effect operator $\ast$ to a total operator
\begin{equation}
    \ast^{\bot}: \hat{A}^{*} \times W^{\bot} \to W^{\bot}.
\end{equation}
These extensions of $W$, $D_{A}$, and $l$ to $W^{\bot}$, $D_{A}^{\bot}$, and $l^{\bot}$ mean $\ast^{\bot}$ is a total monoid action on $W^{\bot}$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Categorical conversion.}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Totalisation of the category of world states.}
\newthought{To handle totalisation}, we need to adjoin an undefined object $\bot$ and to adjoin morphisms that send an object $w \in W$ in $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$ to the undefined $\bot$ whenever $a \ast w$ is undefined; we will do this by constructing a pushout in the category $\cat{Cat}$ of categories:

To handle undefined actions, we define a discrete category $\mathcal{U}$ with objects that represent undefined action-state pairs $(a, w)$:
\begin{equation}
    \text{Ob}(\mathcal{U}) = \{(a,w) \in \hat{A}^{*} \times W \mid \centernot\exists d:w \xrightarrow{a} t(d) \in D_{A}\}.
\end{equation}

To handle $\bot$ and the relevant transformations to $\bot$, we define a star-shaped category $\mathcal{S}$ with:
\begin{enumerate}
    \item \textbf{Objects:}
    A central proto-terminal object $\bot$ and, for each $(a,w) \in \mathcal{U}$, an object $x_{(a,w)}$:
    \begin{equation}
        \text{Ob}(\mathcal{S}) = \{\bot\} \cup \{x_{(a,w)} \mid (a,w) \in \text{Ob}(\mathcal{U}).
    \end{equation}
    \item \textbf{Morphisms:}
    For each $(a,w) \in \text{Ob}(\mathcal{U})$, a morphism $d^{\bot}_{(a,w)}: x_{(a,w)} \to \bot$.
    For each $a \in \hat{A}^{*}$, a morphism $\delta_{a}: \bot \to \bot$.
    For each object $x_{(a,w)}$, a morphism $1_{x_{(a,w)}}$.
    A morphism $1_{\bot}$.
\end{enumerate}

We define two functors:
\begin{enumerate}
    \item a functor $F_{1}: \mathcal{U} \to \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$ that maps each $(a,w) \in \mathcal{U}$ to the object $w \in \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$, and maps each identity morphism $1_{(a,w)} \in \mathcal{U}$ to the identity morphism $1_{w} \in \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$;
    \item a functor $F_{2}: \mathcal{U} \to \mathcal{S}$ that maps each $(a,w) \in \mathcal{U}$ to the object $x_{(a,w)} \in \mathcal{S}$, and maps each identity morphism $1_{(a,w)} \in \mathcal{U}$ to the identity morphism $1_{x_{(a,w)}} \in \mathcal{S}$.
\end{enumerate}

The pushout $(\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}), i_{1}, i_{2})$ of $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$ and $\mathcal{S}$ over $\mathcal{U}$ completes the diagram:\footnote{
    This pushout glues each $x_{(a,w)} \in \mathcal{S}$ to $w \in \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$ for each $(a,w) \in \mathcal{U}$.
    This collapses each $x_{(a,w)}$ into $w$, turning $d^{\bot}_{(a,w)}: x_{(a,w)} \to \bot \in \mathcal{S}$ into $d^{\bot}_{(a,w)}: w \to \bot \in \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$.
}
\begin{equation}
    % https://q.uiver.app/#q=WzAsOSxbMCwwLCJcXG1hdGhjYWx7VX0iXSxbMiwwLCJcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fSkiXSxbMCwyLCJcXG1hdGhjYWx7U30iXSxbMywxXSxbNCwxXSxbNSwwLCJcXG1hdGhjYWx7VX0iXSxbNywwLCJcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fSkiXSxbNSwyLCJcXG1hdGhjYWx7U30iXSxbNywyLCJcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fV57XFxib3R9KSJdLFswLDEsIkZfezF9Il0sWzAsMiwiRl97Mn0iLDJdLFszLDQsIlxcdGV4dHtwdXNob3V0fSJdLFs1LDYsIkZfezF9Il0sWzUsNywiRl97Mn0iLDJdLFs3LDgsImlfezJ9IiwyXSxbNiw4LCJpX3sxfSJdXQ==
\begin{tikzcd}[ampersand replacement=\&]
    {\mathcal{U}} \&\& {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})} \&\&\& {\mathcal{U}} \&\& {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})} \\
    \&\&\& {} \& {} \\
    {\mathcal{S}} \&\&\&\&\& {\mathcal{S}} \&\& {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})}
    \arrow["{F_{1}}", from=1-1, to=1-3]
    \arrow["{F_{2}}"', from=1-1, to=3-1]
    \arrow["{F_{1}}", from=1-6, to=1-8]
    \arrow["{F_{2}}"', from=1-6, to=3-6]
    \arrow["{i_{1}}", from=1-8, to=3-8]
    \arrow["{\text{pushout}}", from=2-4, to=2-5]
    \arrow["{i_{2}}"', from=3-6, to=3-8]
\end{tikzcd}
\end{equation}
The category $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ is universal, so any category with maps from $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$ and $\mathcal{S}$ that agree on $\mathcal{U}$ factors uniquely through $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$.
The resulting structure $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ consists of:
\begin{enumerate}
    \item \textbf{Objects:}
    $W \cup \{\bot\}$.
    \item \textbf{Morphisms:}
    The original morphisms in $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$, the new "glued" morphisms $d^{\bot}_{(a,w)}: w \to \bot$ for each $(a,w) \in \mathcal{U}$, and the morphisms $\delta_{a}: \bot \to \bot$ for each $a \in \hat{A}^{*}$.
\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Totalisation of the labelling functor.}
\newthought{We also need} to construct a totalised labelling functor $L^{\bot}: \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}) \to \mathbf{B}\hat{A}^{*}$ from the labelling functor $L: \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}) \to \mathbf{B}\hat{A}^{*}$.

First we define a labelling functor $L_{\mathcal{S}}: \mathcal{S} \to \mathbf{B}\hat{A}^{*}$ on the star-shaped category $\mathcal{S}$ that acts as follows:
\begin{enumerate}
    \item \textbf{On objects:}
    All the objects in $\mathcal{S}$ are sent to the single object $\bullet \in \mathbf{B}\hat{A}^{*}$:
    \begin{align}
        & L_{\mathcal{S}}(x_{(a,w)}) = \bullet \\
        & L_{\mathcal{S}}(\bot) = \bullet;
    \end{align}

    \item \textbf{On morphisms:}
    For each $d^{\bot}_{(a,w)}: x_{(a,w)} \to \bot$, assign
    \begin{equation}
        L_{\mathcal{S}}(d^{\bot}_{(a,w)}) = a;
    \end{equation}
    For each $\delta_{a}: \bot \to \bot$, assign
    \begin{equation}
        L_{\mathcal{S}}(\delta_{a}) = a
    \end{equation}
    For the identities, assign
    \begin{align}
        L_{\mathcal{S}}(1_{x_{(a,w)}}) = \varepsilon \\
        L_{\mathcal{S}}(1_{\bot}) = \varepsilon.
    \end{align}
\end{enumerate}

So we currently have the diagram:
\begin{equation}
    % https://q.uiver.app/#q=WzAsNSxbMCwwLCJcXG1hdGhjYWx7VX0iXSxbMiwwLCJcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fSkiXSxbMCwyLCJcXG1hdGhjYWx7U30iXSxbMiwyLCJcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fV57XFxib3R9KSJdLFszLDMsIlxcdGV4dGJme0J9XFxoYXR7QX1eeyp9Il0sWzAsMSwiRl97MX0iXSxbMCwyLCJGX3syfSIsMl0sWzIsMywiaV97Mn0iLDJdLFsxLDMsImlfezF9Il0sWzEsNCwiTCIsMCx7ImN1cnZlIjotMn1dLFsyLDQsIkxfe1xcbWF0aGNhbHtTfX0iLDIseyJjdXJ2ZSI6Mn1dXQ==
\begin{tikzcd}[ampersand replacement=\&]
    {\mathcal{U}} \&\& {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})} \\
    \\
    {\mathcal{S}} \&\& {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})} \\
    \&\&\& {\mathbf{B}\hat{A}^{*}}
    \arrow["{F_{1}}", from=1-1, to=1-3]
    \arrow["{F_{2}}"', from=1-1, to=3-1]
    \arrow["{i_{1}}", from=1-3, to=3-3]
    \arrow["L", curve={height=-12pt}, from=1-3, to=4-4]
    \arrow["{i_{2}}"', from=3-1, to=3-3]
    \arrow["{L_{\mathcal{S}}}"', curve={height=12pt}, from=3-1, to=4-4]
\end{tikzcd}
\end{equation}
So if we prove that the functors $L$ and $L_{\mathcal{S}}$ agree on the category $\mathcal{U}$, by proving the consistency condition,
\begin{equation}
    L \circ F_{1} = L_{\mathcal{S}} \circ F_{2},
\end{equation}
then we can construct $L^{\bot}$ as the unique functor from the universal property of the pushout.

\begin{propositionE}
\begin{equation}
    L \circ F_{1} = L_{\mathcal{S}} \circ F_{2}
\end{equation}
\end{propositionE}
\begin{proofE}
\begin{enumerate}
    \item \textbf{For objects:}
    For an arbitrary $(a,w) \in \mathcal{U}$, we have
    \begin{equation}
        L(F_{1}(a,w)) = L(w) = \bullet
    \end{equation}
    and
    \begin{equation}
        L_{\mathcal{S}}(F_{2}(a,w)) = L_{\mathcal{S}}(x_{(a,w)}) = \bullet.
    \end{equation}
    \item \textbf{For morphisms:}
    $\mathcal{U}$ is a discrete category, therefore there are only identities in $\mathcal{U}$.
    For an arbitrary $(a,w) \in \mathcal{U}$, we have
    \begin{equation}
        L(F_{1}(1_{(a,w)}) = L(1_{w}) = \varepsilon
    \end{equation}
    and
    \begin{equation}
        L_{\mathcal{S}}(F_{2}(a,w)) = L_{\mathcal{S}}(1_{x_{(a,w)}}) = \varepsilon.
    \end{equation}
    \item \textbf{Conclusion.}
    Since $L \circ F_{1}$ and $L_{\mathcal{S}} \circ F_{2}$ agree for all objects and morphisms in $\mathcal{U}$, it follows that
    \begin{equation}
            L \circ F_{1} = L_{\mathcal{S}} \circ F_{2}.
    \end{equation}
\end{enumerate}
\end{proofE}

Therefore, by the universal property of the pushout, there exists a unique functor
\begin{equation}
    L^{\bot}: \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}) \to \mathbf{B}\hat{A}^{*}
\end{equation}
such that
\begin{align}
    & L^{\bot} \circ i_{1} = L \\
    & L^{\bot} \circ i_{2} = L_{\mathcal{S}};
\end{align}
as a diagram, this looks like:
\begin{equation}
    % https://q.uiver.app/#q=WzAsNSxbMCwwLCJcXG1hdGhjYWx7VX0iXSxbMiwwLCJcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fSkiXSxbMCwyLCJcXG1hdGhjYWx7U30iXSxbMiwyLCJcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fV57XFxib3R9KSJdLFszLDMsIlxcdGV4dGJme0J9XFxoYXR7QX1eeyp9Il0sWzAsMSwiRl97MX0iXSxbMCwyLCJGX3syfSIsMl0sWzIsMywiaV97Mn0iLDJdLFsxLDMsImlfezF9Il0sWzEsNCwiTCIsMCx7ImN1cnZlIjotMn1dLFsyLDQsIkxfe1xcbWF0aGNhbHtTfX0iLDIseyJjdXJ2ZSI6Mn1dLFszLDQsIkxee1xcYm90fSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
\begin{tikzcd}[ampersand replacement=\&]
    {\mathcal{U}} \&\& {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})} \\
    \\
    {\mathcal{S}} \&\& {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})} \\
    \&\&\& {\mathbf{B}\hat{A}^{*}}
    \arrow["{F_{1}}", from=1-1, to=1-3]
    \arrow["{F_{2}}"', from=1-1, to=3-1]
    \arrow["{i_{1}}", from=1-3, to=3-3]
    \arrow["L", curve={height=-12pt}, from=1-3, to=4-4]
    \arrow["{i_{2}}"', from=3-1, to=3-3]
    \arrow["{L_{\mathcal{S}}}"', curve={height=12pt}, from=3-1, to=4-4]
    \arrow["{L^{\bot}}", dashed, from=3-3, to=4-4]
\end{tikzcd}
\end{equation}

Explicitly, the augmented action labelling functor $L^{\bot}: \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}) \to \mathbf{B}\hat{A}^{*}$ acts as follows:
\begin{enumerate}
    \item \textbf{On objects:}
    \begin{align}
        & L^{\bot}(w) = \bullet \quad \text{for all $w \in W$} \\
        & L^{\bot}(\bot) = \bullet
    \end{align}
    \item \textbf{On morphisms:}
    For the morphisms $d: w \to w'$ in $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})$:
    \begin{equation}
        L^{\bot}(d) = L(d);
    \end{equation}
    For the new morphisms $d^{\bot}_{(a,w)}: w \to \bot$:
    \begin{equation}
        L^{\bot}(d^{\bot}_{(a,w)}) = a;
    \end{equation}
    For the morphisms $\delta_{a}: \bot \to \bot$ in $\mathcal{S}$:
    \begin{equation}
        L^{\bot}(\delta_{a}) = a.
    \end{equation}
\end{enumerate}
$L^{\bot}$ inherits faithfulness by construction because $L$ and $L_{\mathcal{S}}$ are both faithful and the pushout glues morphisms consistently.


\newthought{Since the free category} functor $\mathcal{F}$ is left adjoint to the forgetful functor $U$ (i.e., $\mathcal{F} \dashv U$), any construction that is free (e.g., functor $\mathcal{F}(Q) \to \mathcal{C}$) or is built as a colimit (colimits are preserved by left adjoints) is uniquely determined by its restriction to the underlying quivers $Q$ and $U(C)$ via $U$.
Since we only used free categories, functors from free categories, and colimits in our construction of $L^{\bot}$, we could have constructed the pushout using quivers in $\cat{Quiv}$ and then used $\mathcal{F}$ and the universal property of free categories to lift these into $\cat{Cat}$ to obtain the totalisation category constructions we constructed directly in $\cat{Cat}$. \draftnote{purple}{PS}{
    After changing construction to use quivers then lift via the adjunction, make this more general and put it in the preliminaries
}
The following is a diagram containing these constructions:
\begin{fullwidth}
\begin{equation}
    % https://q.uiver.app/#q=WzAsMTUsWzEsNCwiXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fV57XFxib3R9Il0sWzEsMSwiVShcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fV57XFxib3R9KSkiXSxbNSw0LCJcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fV57XFxib3R9KSJdLFsyLDAsIlxcdGV4dHtJbiAkXFxjYXR7UXVpdn0kOn0iXSxbMywwLCJcXHRleHR7SW4gJFxcY2F0e0NhdH0kfToiXSxbMiw0LCJVKFxcdGV4dGJme0J9XFxoYXR7QX1eeyp9KSJdLFszLDQsIlxcdGV4dGJme0J9XFxoYXR7QX1eeyp9Il0sWzAsMiwiXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fSJdLFswLDYsIlMiXSxbMCw0LCJVIl0sWzYsNiwiXFxtYXRoY2Fse1N9ID0gXFxtYXRoY2Fse0Z9KFMpIl0sWzYsMiwiXFxtYXRoY2Fse0Z9KFxcaGF0e1xcbWF0aHNjcntXfX1fe1xcbWF0aHNjcntBfX0pIl0sWzYsNCwiXFxtYXRoY2Fse1V9ID0gXFxtYXRoY2Fse0Z9KFUpIl0sWzIsMSwiVShcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fSkpIl0sWzIsNiwiVShcXG1hdGhjYWx7Rn0oUykpIl0sWzAsMSwiXFxldGFfe1xcaGF0e1xcbWF0aHNjcntXfX1fe1xcbWF0aHNjcntBfX1ee1xcYm90fX0iLDFdLFsyLDEsIlUiLDEseyJvZmZzZXQiOjEsImNvbG91ciI6WzEyMCw2MCw2MF19LFsxMjAsNjAsNjAsMV1dLFswLDUsImxfe1F9XntcXGJvdH0iLDFdLFs2LDUsIlUiLDEseyJjb2xvdXIiOlsxMjAsNjAsNjBdfSxbMTIwLDYwLDYwLDFdXSxbMSw1LCJcXGV4aXN0cyEgXFw7IFUoTF57XFxib3R9KSIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs3LDBdLFs4LDBdLFs5LDddLFswLDksIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFsxMCwyLCJpX3syfSIsMV0sWzExLDIsImlfezF9IiwxXSxbMTIsMTEsIkZfezF9IiwxXSxbMTIsMTAsIkZfezJ9IiwxXSxbMTAsNiwiXFxleGlzdHMgISBcXDsgTF97XFxtYXRoY2Fse1N9fSIsMSx7ImN1cnZlIjotMiwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzExLDYsIlxcZXhpc3RzICEgXFw7TCIsMSx7ImN1cnZlIjoyLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbNywxMSwiXFxtYXRoY2Fse0Z9IiwxLHsiY3VydmUiOi0xLCJjb2xvdXIiOlswLDYwLDYwXX0sWzAsNjAsNjAsMV1dLFs5LDEyLCJcXG1hdGhjYWx7Rn0iLDEseyJjdXJ2ZSI6NCwiY29sb3VyIjpbMCw2MCw2MF19LFswLDYwLDYwLDFdXSxbOCwxMCwiXFxtYXRoY2Fse0Z9IiwxLHsiY3VydmUiOjMsImNvbG91ciI6WzAsNjAsNjBdfSxbMCw2MCw2MCwxXV0sWzcsNSwibF97UX0iLDEseyJsYWJlbF9wb3NpdGlvbiI6NjB9XSxbMiwxMiwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzcsMTMsIlxcZXRhX3tcXGhhdHtcXG1hdGhzY3J7V319X3tcXG1hdGhzY3J7QX19fSIsMSx7ImxhYmVsX3Bvc2l0aW9uIjozMH1dLFsxMSwxMywiVSIsMSx7ImNvbG91ciI6WzEyMCw2MCw2MF19LFsxMjAsNjAsNjAsMV1dLFsxMyw1LCJcXGV4aXN0cyAhIFxcOyBVKEwpIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzE0LDUsIlxcZXhpc3RzICEgXFw7IFUoTF97XFxtYXRoY2Fse1N9fSkiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbOCwxNCwiXFxldGFfe1N9IiwxXSxbMTAsMTQsIlUiLDEseyJjb2xvdXIiOlsxMjAsNjAsNjBdfSxbMTIwLDYwLDYwLDFdXSxbOSw4XSxbMCwyLCJcXG1hdGhjYWx7Rn0iLDEseyJvZmZzZXQiOjEsImN1cnZlIjotNCwiY29sb3VyIjpbMCw2MCw2MF19LFswLDYwLDYwLDFdXSxbMiw2LCJcXGV4aXN0cyEgXFw7IExee1xcYm90fSIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs4LDUsImxfe1EsU30iLDFdXQ==
\begin{tikzcd}[ampersand replacement=\&]
    \&\& {\text{In $\cat{Quiv}$:}} \& {\text{In $\cat{Cat}$}:} \\
    \& {U(\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}))} \& {U(\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}))} \\
    {\hat{\mathscr{W}}_{\mathscr{A}}} \&\&\&\&\&\& {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}})} \\
    \\
    U \& {\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}} \& {U(\mathbf{B}\hat{A}^{*})} \& {\mathbf{B}\hat{A}^{*}} \&\& {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})} \& {\mathcal{U} = \mathcal{F}(U)} \\
    \\
    S \&\& {U(\mathcal{F}(S))} \&\&\&\& {\mathcal{S} = \mathcal{F}(S)}
    \arrow["{\exists! \; U(L^{\bot})}"{description}, dashed, from=2-2, to=5-3]
    \arrow["{\exists ! \; U(L)}"{description}, dashed, from=2-3, to=5-3]
    \arrow["{\eta_{\hat{\mathscr{W}}_{\mathscr{A}}}}"{description, pos=0.3}, from=3-1, to=2-3]
    \arrow["{\mathcal{F}}"{description}, color={rgb,255:red,214;green,92;blue,92}, curve={height=-6pt}, from=3-1, to=3-7]
    \arrow[from=3-1, to=5-2]
    \arrow["{l_{Q}}"{description, pos=0.6}, from=3-1, to=5-3]
    \arrow["U"{description}, color={rgb,255:red,92;green,214;blue,92}, from=3-7, to=2-3]
    \arrow["{\exists ! \;L}"{description}, curve={height=12pt}, dashed, from=3-7, to=5-4]
    \arrow["{i_{1}}"{description}, from=3-7, to=5-6]
    \arrow[from=5-1, to=3-1]
    \arrow["{\mathcal{F}}"{description}, color={rgb,255:red,214;green,92;blue,92}, curve={height=24pt}, from=5-1, to=5-7]
    \arrow[from=5-1, to=7-1]
    \arrow["{\eta_{\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}}}"{description}, from=5-2, to=2-2]
    \arrow["\lrcorner"{anchor=center, pos=0.125, rotate=-135}, draw=none, from=5-2, to=5-1]
    \arrow["{l_{Q}^{\bot}}"{description}, from=5-2, to=5-3]
    \arrow["{\mathcal{F}}"{description}, shift right, color={rgb,255:red,214;green,92;blue,92}, curve={height=-24pt}, from=5-2, to=5-6]
    \arrow["U"{description}, color={rgb,255:red,92;green,214;blue,92}, from=5-4, to=5-3]
    \arrow["U"{description}, shift right, color={rgb,255:red,92;green,214;blue,92}, from=5-6, to=2-2]
    \arrow["{\exists! \; L^{\bot}}"{description}, dashed, from=5-6, to=5-4]
    \arrow["\lrcorner"{anchor=center, pos=0.125, rotate=45}, draw=none, from=5-6, to=5-7]
    \arrow["{F_{1}}"{description}, from=5-7, to=3-7]
    \arrow["{F_{2}}"{description}, from=5-7, to=7-7]
    \arrow[from=7-1, to=5-2]
    \arrow["{l_{Q,S}}"{description}, from=7-1, to=5-3]
    \arrow["{\eta_{S}}"{description}, from=7-1, to=7-3]
    \arrow["{\mathcal{F}}"{description}, color={rgb,255:red,214;green,92;blue,92}, curve={height=18pt}, from=7-1, to=7-7]
    \arrow["{\exists ! \; U(L_{\mathcal{S}})}"{description}, dashed, from=7-3, to=5-3]
    \arrow["{\exists ! \; L_{\mathcal{S}}}"{description}, curve={height=-12pt}, dashed, from=7-7, to=5-4]
    \arrow["{i_{2}}"{description}, from=7-7, to=5-6]
    \arrow["U"{description}, color={rgb,255:red,92;green,214;blue,92}, from=7-7, to=7-3]
\end{tikzcd}
\end{equation}
\end{fullwidth}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Categorising the totalised action effect operator.}
\newthought{We now want} to categorify our totalised action effect operator $\ast^{\bot}: \hat{A}^{*} \times W^{\bot} \to W^{\bot}$ by currying it into a functor
\begin{equation}
    A^{\bot}: \mathbf{B}\hat{A}^{*} \to \cat{Set}_{\bot},
\end{equation}
where $\cat{Set}_{\bot}$ is the category of pointed sets and basepoint-preserving maps with the undefined state $\bot$ as the basepoint\footnote{
    In the category $\cat{Set}_{\bot}$ of pointed sets and basepoint-preserving maps:
    \begin{enumerate}
        \item \textbf{Objects:}
        Objects are pairs 
        \begin{equation}
            (X, \bot_{X}),
        \end{equation}
        where $X$ is a set and $\bot_{X} \in X$ is a distinguished "undefined" basepoint in $X$.
        \item \textbf{Morphisms:}
        Morphisms are basepoint-preserving functions
        \begin{equation}
            f: (X, \bot_{X}) \to (Y, \bot_{Y})
        \end{equation}
        satisfying
        \begin{equation}
            f(\bot_{X}) = \bot_{Y}.
        \end{equation}
    \end{enumerate}
    This is useful in our case because we always want morphisms to map the undefined state to another undefined state rather than a different element in the relevant set.
}.

Unfortunately, the category $\cat{Set}_{\bot}$ of pointed sets is not a Cartesian closed category\footnote{
    Specifically, the Cartesian product is not compatible with basepoints since exponential object do not have basepoints and so exponential objects of pointed sets are not objects in $\cat{Set}_{\bot}$.
    However, exponential objects of pointed sets are objects in $\cat{Set}$.
} because, for an object $X$ in $\cat{Set}_{\bot}$, the exponential object $X^{X}$ need not exist in $\cat{Set}_{\bot}$, so currying does not work internally in $\cat{Set}_{\bot}$.
However, $\cat{Set}$ is a Cartesian closed category, so we can curry in $\cat{Set}$; we also have an adjunction
\begin{equation}
    F: \cat{Set} \leftrightarrows \cat{Set}_{\bot}: U
\end{equation}
between $\cat{Set}$ and $\cat{Set}_{\bot}$, where $F$ is left adjoint to $U$:
\begin{equation}
    F \dashv U.
\end{equation}
This adjunction $F \dashv U$ consists of
\begin{enumerate}
    \item a free functor
    \begin{equation}
        F: \cat{Set} \to \cat{Set}_{\bot}
    \end{equation}
    which freely adds a basepoint $\bot$ to a set:
    \begin{equation}
        F(X) = (X \sqcup \{\bot\}, \bot)
    \end{equation}
    where $(X \sqcup \{\bot\}, \bot)$ is the pointed set obtained by adjoining a new, disjoint basepoint $\bot$ to $X$\footnote{
        Note that $F(X)$ has one more element that $X$ (the adjoined disjoint basepoint $\bot$), therefore
        \begin{equation}
            U(F(X)) \neq X.
        \end{equation}
    }; and

    \item a forgetful functor
    \begin{equation}
        U: \cat{Set}_{\bot} \to \cat{Set},
    \end{equation}
    which forgets the extra structure of the basepoint:
    \begin{equation}
        U((Y, \bot)) = Y
    \end{equation}
    where $Y$ is the underlying set of the pointed set $(Y, \bot)$\footnote{
        If a set $X$ does not have a distinguished basepoint, then $U$ has no affect $U$ on $X$:
        \begin{equation}
            U(X) = X.
        \end{equation}
    }. \draftnote{blue}{(PS) Consider}{Change to $(Y, y_{0})$ ?}
\end{enumerate}
The adjunction $F \dashv U$ means that every object in $\cat{Set}_{\bot}$ corresponds with an object in $\cat{Set}$, and every morphism in $\cat{Set}_{\bot}$ corresponds with a morphism in $\cat{Set}$ (but not the reverse).

So we want to (1) embed our totalised action effect operator $\ast^{\bot}: \hat{A}^{*} \times W^{\bot} \to W^{\bot}$ into $\cat{Set}$ from $\cat{Set}_{\bot}$ using the adjunction $F \dashv U$, then (2) curry the totalised action effect operator in $\cat{Set}$, and finally (3) lift the curried totalised action effect operator back into $\cat{Set}_{\bot}$ using the adjunction $F \dashv U$.

\begin{enumerate}
    \item \textbf{Embed $\ast^{\bot}$ into $\cat{Set}$ via $F \dashv U$.}
    To do this we, define $\ast^{\bot}: \hat{A}^{*} \times W^{\bot} \to W^{\bot}$ from our original framework as the morphism
    \begin{align}
        & \ast^{\bot}: F(\hat{A}^{*}) \times F(W) \to F(W) \quad \text{such that} \\
        & \ast^{\bot}(a,w) :=
                \begin{cases}
                  a \ast w, & \text{if } \exists d: w \xrightarrow{a} t(d) \\
                  \bot, & \text{if } \centernot\exists d: w \xrightarrow{a} t(d) \\
                  \bot, & \text{if } a = \bot \text{ or } w = \bot
                \end{cases}
    \end{align}
    in $\cat{Set}_{\bot}$.
    Using the forgetful functor $U$, we embed our morphism $\ast^{\bot}: F(\hat{A}^{*}) \times F(W) \to F(W)$ into the morphism\footnote{
        We have
        \begin{equation}
            U(F(\hat{A}^{*}) \times F(W)) \cong U(F(\hat{A}^{*})) \times U(F(W))
        \end{equation}
        because $U: \cat{Set}_{\bot} \to \cat{Set}$ is a right adjoint, therefore it preserves products (and all universal constructions of limits).
        \draftnote{purple}{PS}{Check if $ U(F(\hat{A}^{*}) \times F(W)) = U(F(\hat{A}^{*})) \times U(F(W))$ or if $ U(F(\hat{A}^{*}) \times F(W)) \cong U(F(\hat{A}^{*})) \times U(F(W))$.}
    }
    \begin{equation}
        U(\ast^{\bot}): U(F(\hat{A}^{*})) \times U(F(W)) \to U(F(W))
    \end{equation}
    in $\cat{Set}$:\footnote{
        It's worth taking a moment to consider what $U(F(W))$ and $U(F(\hat{A}^{*}))$ are.
        From the definitions of $U$ and $F$,
        \begin{align}
            U(F(W)) & = U(W \sqcup \{\bot\}, \bot) \\
            & = W \sqcup \{\bot\} \\
            & = W^{\bot};
        \end{align}
        so $U(F(W))$ is just our set $W^{\bot}$ of world states that has been augmented with the undefined state $\bot$.

        \begin{align}
            U(F(\hat{A}^{*})) & = U(\hat{A}^{*} \sqcup \{\bot\}, \bot) \\
            & = \hat{A}^{*} \sqcup \{\bot\};
        \end{align}
        so our set $\hat{A}^{*}$ of actions has gained an element $\bot$.
        However, since
        \begin{equation}
            \ast^{\bot}(\bot, w) = \bot \quad \text{for all $w \in W^{\bot}$},
        \end{equation}
        this additional element makes no difference to the behaviour of $\ast^{\bot}$.
    }
    \begin{fullwidth}
    \begin{equation}
    % https://q.uiver.app/#q=WzAsOCxbMywwLCJcXHRleHR7SW4gfSBcXGNhdHtTZXR9X3tcXGJvdH06Il0sWzEsMCwiXFx0ZXh0e0luIH0gXFxjYXR7U2V0fToiXSxbMywxLCJGKFxcaGF0e0F9XnsqfSkgXFx0aW1lcyBGKFcpIl0sWzMsMywiRihXKSJdLFswLDEsIlUoRihcXGhhdHtBfV57Kn0pKSBcXHRpbWVzIFUoRihXKSkiXSxbMCwzLCJVKEYoVykpIl0sWzEsMSwiVShGKFxcaGF0e0F9XnsqfSkgXFx0aW1lcyBGKFcpKSJdLFsxLDMsIlUoRihXKSkiXSxbNCw1LCJVKFxcYXN0XntcXGJvdH0pIl0sWzIsMywiXFxhc3Ree1xcYm90fSJdLFsyLDYsIlUiLDEseyJjb2xvdXIiOlsxMjAsNjAsNjBdfSxbMTIwLDYwLDYwLDFdXSxbMyw3LCJVIiwxLHsiY29sb3VyIjpbMTIwLDYwLDYwXX0sWzEyMCw2MCw2MCwxXV0sWzcsNSwiPSJdLFs2LDQsIlxcY29uZyJdLFs2LDcsIlUoXFxhc3Ree1xcYm90fSkiXV0=
    \begin{tikzcd}[ampersand replacement=\&]
        \& {\text{In } \cat{Set}:} \&\& {\text{In } \cat{Set}_{\bot}:} \\
        {U(F(\hat{A}^{*})) \times U(F(W))} \& {U(F(\hat{A}^{*}) \times F(W))} \&\& {F(\hat{A}^{*}) \times F(W)} \\
        \\
        {U(F(W))} \& {U(F(W))} \&\& {F(W)}
        \arrow["{U(\ast^{\bot})}", from=2-1, to=4-1]
        \arrow["\cong", from=2-2, to=2-1]
        \arrow["{U(\ast^{\bot})}", from=2-2, to=4-2]
        \arrow["U"{description}, color={rgb,255:red,92;green,214;blue,92}, from=2-4, to=2-2]
        \arrow["{\ast^{\bot}}", from=2-4, to=4-4]
        \arrow["{=}", from=4-2, to=4-1]
        \arrow["U"{description}, color={rgb,255:red,92;green,214;blue,92}, from=4-4, to=4-2]
    \end{tikzcd}
    \end{equation}
    \end{fullwidth}
    \draftnote{purple}{PS}{Can we lift the $\ast$ morphism from $\cat{Set}$ into $\cat{Set}_{\bot}$ in a categorical way?}

    \item \textbf{Curry $U(\ast^{\bot})$.}
    Since $\cat{Set}$ is a Cartesian closed category, there is a canonical isomorphism
    \begin{equation}
        \text{Hom}_{\cat{Set}}(U(F(\hat{A}^{*})) \times U(F(W)), U(F(W)) \cong \text{Hom}_{\cat{Set}}(F(\hat{A}^{*}), U(F(W))^{U(F(W))}),
    \end{equation}
    which we use to curry $U(\ast^{\bot})$ to obtain the curried morphism
    \begin{equation}
        \tilde{\ast}^{\bot}: U(F(\hat{A}^{*})) \to U(F(W))^{U(F(W))}
    \end{equation}
    \begin{fullwidth}
    \begin{equation}
    % https://q.uiver.app/#q=WzAsMTAsWzQsMCwiXFx0ZXh0e0luIH0gXFxjYXR7U2V0fV97XFxib3R9OiJdLFsyLDAsIlxcdGV4dHtJbiB9IFxcY2F0e1NldH06Il0sWzQsMSwiRihcXGhhdHtBfV57Kn0pIFxcdGltZXMgRihXKSJdLFs0LDMsIkYoVykiXSxbMSwxLCJVKEYoXFxoYXR7QX1eeyp9KSkgXFx0aW1lcyBVKEYoVykpIl0sWzEsMywiVShGKFcpKSJdLFswLDMsIlUoRihXKSlee1UoRihXKSl9Il0sWzAsMSwiVShGKFxcaGF0e0F9XnsqfSkpIl0sWzIsMSwiVShGKFxcaGF0e0F9XnsqfSkgXFx0aW1lcyBGKFcpKSJdLFsyLDMsIlUoRihXKSJdLFs0LDUsIlUoXFxhc3Ree1xcYm90fSkiXSxbMiwzLCJcXGFzdF57XFxib3R9Il0sWzQsNywiXFxjb25nIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn19fV0sWzUsNiwiXFxjb25nIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn19fV0sWzcsNiwiXFx0aWxkZXtcXGFzdH1ee1xcYm90fSJdLFsyLDgsIlUiLDEseyJjb2xvdXIiOlsxMjAsNjAsNjBdfSxbMTIwLDYwLDYwLDFdXSxbMyw5LCJVIiwxLHsiY29sb3VyIjpbMTIwLDYwLDYwXX0sWzEyMCw2MCw2MCwxXV0sWzgsOSwiVShcXGFzdF57XFxib3R9KSJdLFs5LDUsIj0iXSxbOCw0LCJcXGNvbmciXV0=
    \begin{tikzcd}[ampersand replacement=\&]
        \&\& {\text{In } \cat{Set}:} \&\& {\text{In } \cat{Set}_{\bot}:} \\
        {U(F(\hat{A}^{*}))} \& {U(F(\hat{A}^{*})) \times U(F(W))} \& {U(F(\hat{A}^{*}) \times F(W))} \&\& {F(\hat{A}^{*}) \times F(W)} \\
        \\
        {U(F(W))^{U(F(W))}} \& {U(F(W))} \& {U(F(W)} \&\& {F(W)}
        \arrow["{\tilde{\ast}^{\bot}}", from=2-1, to=4-1]
        \arrow["\cong", tail reversed, from=2-2, to=2-1]
        \arrow["{U(\ast^{\bot})}", from=2-2, to=4-2]
        \arrow["\cong", from=2-3, to=2-2]
        \arrow["{U(\ast^{\bot})}", from=2-3, to=4-3]
        \arrow["U"{description}, color={rgb,255:red,92;green,214;blue,92}, from=2-5, to=2-3]
        \arrow["{\ast^{\bot}}", from=2-5, to=4-5]
        \arrow["\cong", tail reversed, from=4-2, to=4-1]
        \arrow["{=}", from=4-3, to=4-2]
        \arrow["U"{description}, color={rgb,255:red,92;green,214;blue,92}, from=4-5, to=4-3]
    \end{tikzcd}
    \end{equation}
    \end{fullwidth}
    For each $a \in U(F(\hat{A}^{*}))$, we now have a function
    \begin{equation}
        \tilde{\ast}^{\bot}(a): U(F(W)) \to U(F(W))
    \end{equation}
    satisfying
    \begin{equation}
        \tilde{\ast}^{\bot}(a)(w) = \begin{cases}
                    \bot, & \text{if $a = \bot$} \\
                  a \ast^{\bot} w, & \text{otherwise}
                \end{cases}
    \end{equation}
    Since, $\ast^{\bot}$ is basepoint-preserving, we have
    \begin{equation}
        \tilde{\ast}^{\bot}(a)(\bot) = \bot.
    \end{equation}
    Therefore, each $\tilde{\ast}^{\bot}(a)$ is a basepoint-preserving map
    \begin{equation}
        \tilde{\ast}^{\bot}(a) \in \{f: U(F(W)) \to U(F(W)) \mid f(\bot) = \bot\}
    \end{equation}


    \item \textbf{Lift $\tilde{\ast}^{\bot}$ into $\cat{Set}_{\bot}$ via $F \dashv U$.}
    To lift $\tilde{\ast}^{\bot}$ into $\cat{Set}_{\bot}$, we're going to consider each curried morphism $\tilde{\ast}^{\bot}(a): U(F(W)) \to U(F(W))$ individually, and show we can use these morphisms to construct an expression for a morphism from $F(W) \to F(W)$, which we will call $\phi(a)$.
    
    Starting at $W$ in $\cat{Set}$, we apply $F$ to $W$,
    \begin{equation}
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXHRleHR7SW4gfSBcXGNhdHtTZXR9OiJdLFsyLDAsIlxcdGV4dHtJbiB9IFxcY2F0e1NldH1fe1xcYm90fToiXSxbMiwzLCJGKFcpIl0sWzAsMSwiVyJdLFszLDIsIkYiLDEseyJjb2xvdXIiOlswLDYwLDYwXX0sWzAsNjAsNjAsMV1dXQ==
    \begin{tikzcd}[ampersand replacement=\&]
        {\text{In } \cat{Set}:} \&\& {\text{In } \cat{Set}_{\bot}:} \\
        W \\
        \\
        \&\& {F(W)}
        \arrow["F"{description}, color={rgb,255:red,214;green,92;blue,92}, from=2-1, to=4-3]
    \end{tikzcd}
    \end{equation}
    then we apply $U$ to $F(W)$, constructing the relevant map $\eta_{W}$ as we do, and adding the curried morphism $\tilde{\ast}^{\bot}$ that corresponds to $a \in \hat{A}^{*}$:
    \begin{equation}
        % https://q.uiver.app/#q=WzAsNSxbMCwwLCJcXHRleHR7SW4gfSBcXGNhdHtTZXR9OiJdLFsyLDAsIlxcdGV4dHtJbiB9IFxcY2F0e1NldH1fe1xcYm90fToiXSxbMiwzLCJGKFcpIl0sWzAsMywiVShGKFcpKSJdLFswLDEsIlciXSxbMiwzLCJVIiwxLHsiY29sb3VyIjpbMTIwLDYwLDYwXX0sWzEyMCw2MCw2MCwxXV0sWzQsMiwiRiIsMSx7ImNvbG91ciI6WzAsNjAsNjBdfSxbMCw2MCw2MCwxXV0sWzQsMywiXFxldGFfe1d9Il0sWzMsMywiXFx0aWxkZXtcXGFzdH1ee1xcYm90fShhKSIsMCx7Im9mZnNldCI6LTUsImFuZ2xlIjotOTB9XV0=
    \begin{tikzcd}[ampersand replacement=\&]
        {\text{In } \cat{Set}:} \&\& {\text{In } \cat{Set}_{\bot}:} \\
        W \\
        \\
        {U(F(W))} \&\& {F(W)}
        \arrow["{\eta_{W}}", from=2-1, to=4-1]
        \arrow["F"{description}, color={rgb,255:red,214;green,92;blue,92}, from=2-1, to=4-3]
        \arrow["{\tilde{\ast}^{\bot}(a)}", shift left=5, from=4-1, to=4-1, loop, in=145, out=215, distance=10mm]
        \arrow["U"{description}, color={rgb,255:red,92;green,214;blue,92}, from=4-3, to=4-1]
    \end{tikzcd}
    \end{equation}
    Then we apply $F$ to $U(F(W))$, construct the relevant morphism $\epsilon_{F(W)}$, and transport $\tilde{\ast}^{\bot}(a)$ and $\eta_{W}$ over to $\cat{Set}_{\bot}$:
    \begin{equation}
        % https://q.uiver.app/#q=WzAsNixbMCwwLCJcXHRleHR7SW4gfSBcXGNhdHtTZXR9OiJdLFsyLDAsIlxcdGV4dHtJbiB9IFxcY2F0e1NldH1fe1xcYm90fToiXSxbMiwzLCJGKFcpIl0sWzIsNSwiRihVKEYoVykpKSJdLFswLDMsIlUoRihXKSkiXSxbMCwxLCJXIl0sWzIsNCwiVSIsMSx7ImNvbG91ciI6WzEyMCw2MCw2MF19LFsxMjAsNjAsNjAsMV1dLFs0LDMsIkYiLDEseyJjb2xvdXIiOlswLDYwLDYwXX0sWzAsNjAsNjAsMV1dLFszLDIsIlxcZXBzaWxvbl97RihXKX0iXSxbMywzLCJGKFxcdGlsZGV7XFxhc3R9XntcXGJvdH0oYSkpIiwwLHsiYW5nbGUiOi0xODB9XSxbNSwyLCJGIiwxLHsiY29sb3VyIjpbMCw2MCw2MF19LFswLDYwLDYwLDFdXSxbNSw0LCJcXGV0YV97V30iXSxbNCw0LCJcXHRpbGRle1xcYXN0fV57XFxib3R9KGEpIiwwLHsib2Zmc2V0IjotNSwiYW5nbGUiOi05MH1dLFsyLDMsIkYoXFxldGFfe1d9KSIsMCx7Im9mZnNldCI6LTN9XV0=
    \begin{tikzcd}[ampersand replacement=\&]
        {\text{In } \cat{Set}:} \&\& {\text{In } \cat{Set}_{\bot}:} \\
        W \\
        \\
        {U(F(W))} \&\& {F(W)} \\
        \\
        \&\& {F(U(F(W)))}
        \arrow["{\eta_{W}}", from=2-1, to=4-1]
        \arrow["F"{description}, color={rgb,255:red,214;green,92;blue,92}, from=2-1, to=4-3]
        \arrow["{\tilde{\ast}^{\bot}(a)}", shift left=5, from=4-1, to=4-1, loop, in=145, out=215, distance=10mm]
        \arrow["F"{description}, color={rgb,255:red,214;green,92;blue,92}, from=4-1, to=6-3]
        \arrow["U"{description}, color={rgb,255:red,92;green,214;blue,92}, from=4-3, to=4-1]
        \arrow["{F(\eta_{W})}", shift left=3, from=4-3, to=6-3]
        \arrow["{\epsilon_{F(W)}}", from=6-3, to=4-3]
        \arrow["{F(\tilde{\ast}^{\bot}(a))}", from=6-3, to=6-3, loop, in=235, out=305, distance=10mm]
    \end{tikzcd}
    \end{equation}
    Finally, from the universal property of the adjunction $F \dashv U$, the unique lift of the curried map $\tilde{\ast}^{\bot}(a): U(F(W)) \to U(F(W))$ to a pointed map $\phi(a): W^{\bot} \to W^{\bot}$ can be constructed:
    \begin{equation}
        % https://q.uiver.app/#q=WzAsNixbMCwwLCJcXHRleHR7SW4gfSBcXGNhdHtTZXR9OiJdLFsyLDAsIlxcdGV4dHtJbiB9IFxcY2F0e1NldH1fe1xcYm90fToiXSxbMiwzLCJGKFcpIl0sWzIsNSwiRihVKEYoVykpKSJdLFswLDMsIlUoRihXKSkiXSxbMCwxLCJXIl0sWzIsNCwiVSIsMSx7ImNvbG91ciI6WzEyMCw2MCw2MF19LFsxMjAsNjAsNjAsMV1dLFs0LDMsIkYiLDEseyJjb2xvdXIiOlswLDYwLDYwXX0sWzAsNjAsNjAsMV1dLFszLDIsIlxcZXBzaWxvbl97RihXKX0iXSxbMywzLCJGKFxcdGlsZGV7XFxhc3R9XntcXGJvdH0oYSkpIiwwLHsiYW5nbGUiOi0xODB9XSxbNSwyLCJGIiwxLHsiY29sb3VyIjpbMCw2MCw2MF19LFswLDYwLDYwLDFdXSxbNSw0LCJcXGV0YV97V30iXSxbNCw0LCJcXHRpbGRle1xcYXN0fV57XFxib3R9KGEpIFxcXFw9IFUoXFxwaGkoYSkpIiwwLHsib2Zmc2V0IjotNSwiYW5nbGUiOi05MH1dLFsyLDMsIkYoXFxldGFfe1d9KSIsMCx7Im9mZnNldCI6LTN9XSxbMiwyLCJcXGV4aXN0cyAhIFxcOyBcXHBoaShhKSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
    \begin{tikzcd}[ampersand replacement=\&]
        {\text{In } \cat{Set}:} \&\& {\text{In } \cat{Set}_{\bot}:} \\
        W \\
        \\
        {U(F(W))} \&\& {F(W)} \\
        \\
        \&\& {F(U(F(W)))}
        \arrow["{\eta_{W}}", from=2-1, to=4-1]
        \arrow["F"{description}, color={rgb,255:red,214;green,92;blue,92}, from=2-1, to=4-3]
        \arrow["\begin{array}{c} \tilde{\ast}^{\bot}(a) \\= U(\phi(a)) \end{array}", shift left=5, from=4-1, to=4-1, loop, in=145, out=215, distance=10mm]
        \arrow["F"{description}, color={rgb,255:red,214;green,92;blue,92}, from=4-1, to=6-3]
        \arrow["U"{description}, color={rgb,255:red,92;green,214;blue,92}, from=4-3, to=4-1]
        \arrow["{\exists ! \; \phi(a)}", dashed, from=4-3, to=4-3, loop, in=55, out=125, distance=10mm]
        \arrow["{F(\eta_{W})}", shift left=3, from=4-3, to=6-3]
        \arrow["{\epsilon_{F(W)}}", from=6-3, to=4-3]
        \arrow["{F(\tilde{\ast}^{\bot}(a))}", from=6-3, to=6-3, loop, in=235, out=305, distance=10mm]
    \end{tikzcd}
    \end{equation}
    where
    \begin{equation}
        \phi(a) = \epsilon_{F(W)} \circ F(\tilde{\ast}^{\bot}(a)) \circ F(\eta_{W})
    \end{equation}
    is the unique morphism in $\cat{Set}_{\bot}$ such that the underlying set function is $\tilde{\ast}^{\bot}(a)$:
    \begin{equation}
        U(\phi(a)) = \tilde{\ast}^{\bot}(a).
    \end{equation}
    This means that $\phi(a)$ is the unique lift of the function
    \begin{equation}
        (w \mapsto a \ast^{\bot} w) \in \text{End}(W^{\bot})
    \end{equation}
    from $\cat{Set}$ to $\cat{Set}_{\bot}$, and, therefore,
    \begin{equation}
    \begin{aligned}
        & \phi: \hat{A}^{*} \to \text{End}(W^{\bot}) \\
        & \phi(a)(w) = a \ast^{\bot} w \quad \text{for all $w \in W$ and for all $a \in \hat{A}^{*}$}.
    \end{aligned}
    \end{equation}
\end{enumerate}


\newthought{In categorical terms,} currying the action $\ast^{\bot}$ encodes it as as a functor from the one-object category $\mathbf{B}\hat{A}^{*}$ into $\cat{Set}_{\bot}$:
\begin{equation}
    A^{\bot}: \mathbf{B}\hat{A}^{*} \to \cat{Set}_{\bot}.
\end{equation}
where $A^{\bot}$ acts as follows:
\begin{enumerate}
    \item \textbf{On objects:}
    the single object $\bullet$ is mapped to the pointed set $(W^{\bot}, \bot)$
    \begin{equation}
        A^{\bot}(\bullet) := (W^{\bot}, \bot).
    \end{equation}
    \item \textbf{On morphisms:}
    each morphism $a \in \hat{A}^{*}$ is mapped to the world state-transition function $w \mapsto a \ast^{\bot} w$, respecting $\bot$,
    \begin{equation}
    \begin{aligned}
        A^{\bot}(a) & := \phi(a) \quad \text{such that}
    \end{aligned}
    \end{equation}
    and so\footnote{
        \begin{equation}
             % https://q.uiver.app/#q=WzAsNixbMSwwLCJcXGJ1bGxldCJdLFszLDAsIlxcYnVsbGV0Il0sWzEsMSwiKFdee1xcYm90fSwgXFxib3QpIl0sWzMsMSwiKFdee1xcYm90fSwgXFxib3QpIl0sWzAsMCwiXFx0ZXh0e0luICB9IFxcdGV4dGJme0J9XFxoYXR7QX1eeyp9OiJdLFswLDEsIlxcdGV4dHtJbiAgfSBcXGNhdHtTZXR9X3tcXGJvdH0iXSxbMCwxLCJhIl0sWzAsMiwiQV57XFxib3R9KGEpIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFsxLDMsIkFee1xcYm90fShhKSIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbMiwzLCJBXntcXGJvdH0oYSkiXV0=
        \begin{tikzcd}[ampersand replacement=\&]
            {\text{In  } \mathbf{B}\hat{A}^{*}:} \& \bullet \&\& \bullet \\
            {\text{In  } \cat{Set}_{\bot}} \& {(W^{\bot}, \bot)} \&\& {(W^{\bot}, \bot)}
            \arrow["a", from=1-2, to=1-4]
            \arrow["{A^{\bot}(a)}", maps to, from=1-2, to=2-2]
            \arrow["{A^{\bot}(a)}", maps to, from=1-4, to=2-4]
            \arrow["{A^{\bot}(a)}", from=2-2, to=2-4]
        \end{tikzcd}
        \end{equation}
    }
    \begin{align}
    \begin{aligned}
        & A^{\bot}(a): W^{\bot} \to W^{\bot} \quad \text{such that} \\
        & A^{\bot}(a)(w) = a \ast^{\bot} w.
    \end{aligned}
    \end{align}
     in $\cat{Set}_{\bot}$.
\end{enumerate}


\begin{propositionE}
    $A^{\bot}: \mathbf{B}\hat{A}^{*} \to \cat{Set}_{\bot}$ is a functor.
\end{propositionE}
\begin{proofE}
\begin{enumerate}
    \item \textbf{Identity.}
    For any $w \in W^{\bot}$, we have
    \begin{align}
        A^{\bot}(\varepsilon)(w) & = \varepsilon \ast^{\bot} w \\
        & = w.
    \end{align}
    Since this holds for any $w \in W^{\bot}$, we have
    \begin{equation}
        A^{\bot}(\varepsilon) = \text{id}_{W^{\bot}}.
    \end{equation}

    \item \textbf{Composition.}
    For any $w \in W^{\bot}$, we have
    \begin{align}
        A^{\bot}(a' \circ a)(w) & = (a' \circ a) \ast^{\bot} w \\
        & = a' \ast^{\bot} (a \ast^{\bot} w) \\
        & = (A^{\bot}(a') \circ A^{\bot}(a))(w).
    \end{align}
    Since this holds for any $w \in W^{\bot}$, we have
    \begin{equation}
        A^{\bot}(a' \circ a) = A^{\bot}(a') \circ A^{\bot}(a).
    \end{equation}
\end{enumerate}
\end{proofE}

The functor $A^{\bot}$ is faithful because distinct actions induce distinct functions; this is ensured by the uniqueness condition in the labelling map $l$.\draftnote{purple}{To do}{Prove this.}

Our indirect currying method allows us to
\begin{enumerate}
    \item package the data of $\ast^{\bot}$ into a functor
    \begin{equation}
        A^{\bot}: \mathbf{B}\hat{A}^{*} \to \cat{Set}_{\bot},
    \end{equation}
    which contains the total action as a monoid representation in $\cat{Set}_{\bot}$; and
    \item reinterpret the totalised action operator $\ast^{\bot}$ as a map into the endomorphism set $\text{End}(W^{\bot})$; the endomorphism viewpoint is the pointwise version of the functor $A^{\bot}$ (i.e., the functor $A^{\bot}$ acts on each element of the object $W^{\bot}$ individually instead of manipulating the entire structure $W^{\bot}$ as a whole).
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{The action functor and the labelling functor.}
\newthought{We can compose} our action functor
\begin{equation}
    A^{\bot}: \mathbf{B}\hat{A}^{*} \to \cat{Set}_{\bot}
\end{equation}
with our totalised action labelling map
\begin{equation}
    L^{\bot}: \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}) \to \mathbf{B}\hat{A}^{*}
\end{equation}
to give the composite functor
\begin{equation}
    A^{\bot} \circ L^{\bot}: \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}) \to \cat{Set}_{\bot},
\end{equation}
\begin{equation}
    % https://q.uiver.app/#q=WzAsMyxbMCwxLCJcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fV57XFxib3R9KSJdLFsyLDAsIlxcdGV4dGJme0J9XFxoYXR7QX1eeyp9Il0sWzQsMSwiXFxjYXR7U2V0fV97XFxib3R9Il0sWzAsMSwie0xee1xcYm90fX0iXSxbMSwyLCJ7QV57XFxib3R9fSJdLFswLDIsIlxcZXhpc3RzICEgXFw7IHtBXntcXGJvdH0gXFxjaXJjIExee1xcYm90fX0iLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
    \begin{tikzcd}[ampersand replacement=\&]
        \&\& {\mathbf{B}\hat{A}^{*}} \\
        {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})} \&\&\&\& {\cat{Set}_{\bot}}
        \arrow["{{A^{\bot}}}", from=1-3, to=2-5]
        \arrow["{{L^{\bot}}}", from=2-1, to=1-3]
        \arrow["{\exists ! \; {A^{\bot} \circ L^{\bot}}}"', dashed, from=2-1, to=2-5]
    \end{tikzcd}
\end{equation}
where $A^{\bot} \circ L^{\bot}$ is unique because both $L^{\bot}$ is uniquely determined by the atomic labelling $\hat{l}$ and the pushout, and $A^{\bot}$ is uniquely determined by $\ast^{\bot}$ and the adjunction.
$A^{\bot} \circ L^{\bot}$ being unique means there is no ambiguity in the labelling of $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ by $\mathbf{B}\hat{A}^{*}$.

$A^{\bot} \circ L^{\bot}$ takes a transformation in the totalised world, labels it with its corresponding action $a \in \hat{A}^{*}$, and then applies the effect of $a$ on $W^{\bot}$ via the monoid homomorphism $\phi$.
In this way, $\ast^{\bot}$ can be viewed as the \emph{concrete representation}\footnote{
    A \emph{concrete representation} is a representation in $\cat{Set}$.
} of the abstract structure of the free category $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ via the functor $A^{\bot} \circ L^{\bot}$; $A^{\bot} \circ L^{\bot}$ captures how the abstract composition of actions (encoded categorically) actually operates on world states in a concrete (i.e., set-theoretic) manner.
\draftnote{purple}{(PS) Include}{
Talk about syntactic action vs semantic information.
Syntax is the free, combinatorial structure of the actions.
The semantics is the interpretation of these actions as actual transformations on $W^{\bot}$.
}

So what is happening when we apply the composite functor $A^{\bot} \circ L^{\bot}$ to the free category $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$?
The free category $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ contains rich semantic data about the world\footnote{
    From a category theory perspective, $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ actually contains all the information about the world via the Yoneda lemma \draftnote{purple}{(PS) To do}{Check this.}.
}.
The labelling functor $L^{\bot}$ "forgets" much of the rich semantic data present in  $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ (e.g., details about individual world states and the intermediate steps of transformations), but it retains syntactic information about the compositional properties of the transformations in $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ as reflected in the concatenation of actions in $\mathbf{B}\hat{A}^{*}$.
We can think of $L^{\bot}$ as forgetting this semantic information by "gluing" all the world states in $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ together to form a single object $\bullet$ in $\mathbf{B}\hat{A}^{*}$, but preserving the essential compositional structure of the transformations in $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ by imposing a syntactic structure through the labels; $A^{\bot}$ then restores semantic meaning by interpreting the syntactic labels as concrete transformations of the set $W^{\bot}$.
In this way, the composite functor $A^{\bot} \circ L^{\bot}$ forms a semanticsyntactic bridge.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{
Categorification of the equivalence relation
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Recap.}
We defined an equivalence relation $\sim$ on $\hat{A}^{*}$ such that, for two actions $a, a' \in \hat{A}^{*}$,
\begin{equation}
    a \sim a' \iff a \ast w = a' \ast w \quad \text{ for all $w \in W^{\bot}$}.
\end{equation}
$\sim$ is a congruence relation on the free monoid $(\hat{A}^{*}, \circ)$.

We then apply $\sim$ to the free monoid $(\hat{A}^{*}, \circ)$ through the monoid homomorphism
\begin{equation}
    \pi_{\sim}: \hat{A}^{*} \to \hat{A}^{*}/\sim
\end{equation}
to give the quotient monoid $(\hat{A}^{*}/\sim, \circ_{\sim})$, which reflects the global structure of the effect $\ast^{\bot}$ of the actions on the world.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Categorical conversion.}
\draftnote{purple}{Include}{
The equivalence relation $\sim$ is the kernel of the Yoneda embedding $\mathcal{Y}: \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}) \to \cat{Set}^{{\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})}^{\text{op}}}$, where $a \sim a'$ iff they induce the same natural transformation.
}


\newthought{The congruence relation} $\sim$ identifies precisely those pairs of actions $a, a' \in \hat{A}^{*}$ that the functor $A^{\bot}$ maps to the same function in $\cat{Set}_{\bot}$; in other words,\footnote{
    The Yoneda embedding maps states to their distinguishable (i.e., observable) behaviours
    \begin{equation}
        \mathcal{Y}(w) = \text{Hom}(-, w).
    \end{equation}
    Two states are \emph{observationally equivalent} (i.e., $a \ast w = a \ast w'$ for all $a \in \hat{A}^{*}$) if and only if $\mathcal{Y}(w) \cong \mathcal{Y}(w')$; therefore,
    \begin{equation}
        a \sim a' \iff \mathcal{Y}(w) \cong \mathcal{Y}(w'),
    \end{equation}
    and so we can view the equivalence relation $\sim$ as a characterisation of the Yoneda embedding.
}
\begin{align}
    & a \sim a' \\
    \iff & a \ast^{\bot} w = a' \ast^{\bot} w \quad \text{for all $w \in W^{\bot}$}
\end{align}
and, since $A^{\bot}(a)(w) = a \ast^{\bot} w$, we have
\begin{align}
    & a \ast^{\bot} w = a' \ast^{\bot} w \quad \text{for all $w \in W^{\bot}$} \\
    \iff & A^{\bot}(a)(w) = A^{\bot}(a')(w) \quad \text{for all $w \in W^{\bot}$} \\
    \iff & A^{\bot}(a) = A^{\bot}(a').
\end{align}
This makes $\sim$ the \emph{kernel congruence} of the functor $A^{\bot}$ - so the application of $\sim$ to the morphisms in $\mathbf{B}\hat{A}^{*}$ collapses all the morphisms that act identically on $W^{\bot}$.
The categorical manifestation of the kernel congruence $\sim$ is the \emph{kernel pair} $(\mathcal{K}, p_{1}, p_{2})$ of the action functor $A^{\bot}$:
\begin{equation}
    % https://q.uiver.app/#q=WzAsOSxbNSwwLCJcXG1hdGhjYWx7S30iXSxbNywwLCJcXHRleHRiZntCfVxcaGF0e0F9XnsqfSJdLFs1LDIsIlxcdGV4dGJme0J9XFxoYXR7QX1eeyp9Il0sWzcsMiwiXFxjYXR7U2V0fV97XFxib3R9Il0sWzQsMV0sWzMsMV0sWzIsMCwiXFx0ZXh0YmZ7Qn1cXGhhdHtBfV57Kn0iXSxbMiwyLCJcXGNhdHtTZXR9X3tcXGJvdH0iXSxbMCwyLCJcXHRleHRiZntCfVxcaGF0e0F9XnsqfSJdLFswLDEsInBfMSJdLFswLDIsInBfMiIsMl0sWzEsMywiQV57XFxib3R9Il0sWzIsMywiQV57XFxib3R9IiwyXSxbNSw0LCJcXHRleHR7cHVsbGJhY2t9Il0sWzYsNywiQV57XFxib3R9Il0sWzgsNywiQV57XFxib3R9IiwyXV0=
\begin{tikzcd}[ampersand replacement=\&]
    \&\& {\mathbf{B}\hat{A}^{*}} \&\&\& {\mathcal{K}} \&\& {\mathbf{B}\hat{A}^{*}} \\
    \&\&\& {} \& {} \\
    {\mathbf{B}\hat{A}^{*}} \&\& {\cat{Set}_{\bot}} \&\&\& {\mathbf{B}\hat{A}^{*}} \&\& {\cat{Set}_{\bot}}
    \arrow["{A^{\bot}}", from=1-3, to=3-3]
    \arrow["{p_1}", from=1-6, to=1-8]
    \arrow["{p_2}"', from=1-6, to=3-6]
    \arrow["{A^{\bot}}", from=1-8, to=3-8]
    \arrow["{\text{pullback}}", from=2-4, to=2-5]
    \arrow["{A^{\bot}}"', from=3-1, to=3-3]
    \arrow["{A^{\bot}}"', from=3-6, to=3-8]
\end{tikzcd}
\end{equation}
where $\mathcal{K}$ consists of
\begin{enumerate}
    \item \textbf{Objects:}
    \begin{equation}
        \text{Obj}(\mathcal{K}) = \{\bullet_{\mathcal{K}}\};
    \end{equation}
    \item \textbf{Morphisms:}\footnote{
    $\mathcal{K}$ encodes pairs $(a, a')$ with $A^{\bot}(a) = A^{\bot}(a')$ so that $a$ and $a'$ are sent to the same morphism in $\cat{Set}_{\bot}$.
}
    \begin{equation}
        \text{Hom}(\bullet_{\mathcal{K}}, \bullet_{\mathcal{K}}) = \{(a, a') \in \hat{A}^{*} \times \hat{A}^{*} \mid a \sim a'\};
    \end{equation}
\end{enumerate}
and the functors $p_{1}, p_{2}: \mathcal{K} \rightrightarrows \mathbf{B}\hat{A}^{*}$ are the pullback projection morphisms that send:
\begin{enumerate}
    \item \textbf{Objects:}
    \begin{align}
        & p_{1}(\bullet_{\mathcal{K}}) = \bullet \\
        & p_{2}(\bullet_{\mathcal{K}}) = \bullet
    \end{align}
    \item \textbf{Morphisms:}
    \begin{align}
        & p_{1}((a,a')) = a \\
        & p_{2}((a,a')) = a'.
    \end{align}
\end{enumerate}

The categorical manifestation of taking the quotient of the free monoid $\mathbf{B}\hat{A}^{*}$ under the equivalence relation $\sim$ is constructing the coequalizer $(\mathbf{B}(\hat{A}^{*}/\sim), \Pi_{\sim})$, where the functor $\Pi_{\sim}$ enforces the equivalence relation $\sim$ on $\mathbf{B}\hat{A}^{*}$.
We can construct the coequalizer $(\mathbf{B}(\hat{A}^{*}/\sim), \Pi_{\sim})$ as follows:
\begin{equation}
% https://q.uiver.app/#q=WzAsOSxbMCwwLCJcXG1hdGhjYWx7S30iXSxbMiwwLCJcXHRleHRiZntCfVxcaGF0e0F9XnsqfSJdLFszLDFdLFs0LDFdLFswLDIsIlxcdGV4dGJme0J9XFxoYXR7QX1eeyp9Il0sWzUsMiwiXFx0ZXh0YmZ7Qn1cXGhhdHtBfV57Kn0iXSxbNSwwLCJcXG1hdGhjYWx7S30iXSxbNywwLCJcXHRleHRiZntCfVxcaGF0e0F9XnsqfSJdLFs3LDIsIlxcdGV4dGJme0J9KFxcaGF0e0F9XnsqfS9cXHNpbSkiXSxbMCwxLCJwXzEiLDAseyJvZmZzZXQiOi0xfV0sWzIsMywiXFx0ZXh0e3B1c2hvdXR9Il0sWzAsNCwicF97Mn0iLDIseyJvZmZzZXQiOjF9XSxbNiw1LCJwX3syfSIsMl0sWzYsNywicF97MX0iXSxbNyw4LCJcXFBpX3tcXHNpbX0iXSxbNSw4LCJcXFBpX3tcXHNpbX0iLDJdXQ==
\begin{tikzcd}[ampersand replacement=\&]
    {\mathcal{K}} \&\& {\mathbf{B}\hat{A}^{*}} \&\&\& {\mathcal{K}} \&\& {\mathbf{B}\hat{A}^{*}} \\
    \&\&\& {} \& {} \\
    {\mathbf{B}\hat{A}^{*}} \&\&\&\&\& {\mathbf{B}\hat{A}^{*}} \&\& {\mathbf{B}(\hat{A}^{*}/\sim)}
    \arrow["{p_1}", shift left, from=1-1, to=1-3]
    \arrow["{p_{2}}"', shift right, from=1-1, to=3-1]
    \arrow["{p_{1}}", from=1-6, to=1-8]
    \arrow["{p_{2}}"', from=1-6, to=3-6]
    \arrow["{\Pi_{\sim}}", from=1-8, to=3-8]
    \arrow["{\text{pushout}}", from=2-4, to=2-5]
    \arrow["{\Pi_{\sim}}"', from=3-6, to=3-8]
\end{tikzcd}
\end{equation}
where the quotient functor\footnote{
    $\Pi_{\sim}$ is a strict monoidal functor because it preserves composition and identities.
}
\begin{equation}
    \Pi_{\sim}: \mathbf{B}\hat{A}^{*} \to \mathbf{B}(\hat{A}^{*}/\sim),
\end{equation}
sends\footnote{
    The functor $\Pi_{\sim}$ enforces the structure of $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ onto $\mathbf{B}\hat{A}^{*}$ through the congruence relation $\sim$ by collapsing sequences of actions in $\hat{A}^{*}$ that are observationally indistinguishable in the world $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$.
    In other words, the coequalizer $(\mathbf{B}(\hat{A}^{*}/\sim), \Pi_{\sim})$ collapses the kernel pair of $A^{\bot}$.
}
\begin{enumerate}
    \item \textbf{Objects:}
    the single object $\bullet$ in $\mathbf{B}\hat{A}^{*}$ to the single object $\bullet$ in $\mathbf{B}(\hat{A}^{*}/\sim)$:
    \begin{equation}
        \Pi_{\sim}(\bullet) = \bullet.
    \end{equation}
    \item \textbf{Morphisms:}
    each morphism $a \in \hat{A}^{*}$ to its equivalence class $[a]_{\sim} \in \hat{A}^{*}/\sim$:
    \begin{equation}
        \Pi_{\sim}(a) = [a]_{\sim}.
    \end{equation}
\end{enumerate}
This gives us the diagram:
\begin{equation}
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXG1hdGhjYWx7S30iXSxbMiwwLCJcXHRleHRiZntCfVxcaGF0e0F9XnsqfSJdLFs0LDAsIlxcdGV4dGJme0J9KFxcaGF0e0F9XnsqfS9cXHNpbSkiXSxbMCwxLCJwXzEiLDAseyJvZmZzZXQiOi0xfV0sWzEsMl0sWzAsMSwicF97Mn0iLDIseyJvZmZzZXQiOjF9XV0=
\begin{tikzcd}[ampersand replacement=\&]
    {\mathcal{K}} \&\& {\mathbf{B}\hat{A}^{*}} \&\& {\mathbf{B}(\hat{A}^{*}/\sim)}
    \arrow["{p_1}", shift left, from=1-1, to=1-3]
    \arrow["{p_{2}}"', shift right, from=1-1, to=1-3]
    \arrow["{\Pi_{\sim}}", from=1-3, to=1-5]
\end{tikzcd}
\end{equation}

The quotient map $\Pi_{\sim}$ forgets precisely the syntactic differences found in $\mathbf{B}\hat{A}^{*}$ that do not affect the semantic action on $W^{\bot}$.
This means that the functor $\Pi_{\sim}$ makes $\mathbf{B}\hat{A}^{*}$ into a structure $\mathbf{B}(\hat{A}^{*}/\sim)$ that is isomorphic to the structure of $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ with respect to the equivalence $\sim$.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{
Labelling $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ by the equivalence classes in $\mathbf{B}(\hat{A}^{*}/\sim)$.
}

The universal property of the coequalizer ensures that any functor from $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^\bot)$ into a category where the labels are already collapsed accord to $\sim$, must factor uniquely through $\Pi_{\sim}$.
Therefore, we can use our action labelling functor
\begin{equation}
    L^{\bot}: \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^\bot) \to \mathbf{B}\hat{A}^{*}
\end{equation}
to construct the unique functor
\begin{equation}
    L^{\bot}_{\sim}: \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^\bot) \to \mathbf{B}(\hat{A}^{*}/\sim)
\end{equation}
so that the diagram
\begin{equation}
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fV5cXGJvdCkiXSxbMiwwLCJcXG1hdGhiZntCfVxcaGF0e0F9XioiXSxbMiwyLCJcXG1hdGhiZntCfShcXGhhdHtBfV4qL1xcc2ltKSJdLFswLDEsIkxeXFxib3QiXSxbMCwyLCJcXGV4aXN0cyAhIFxcOyBMXlxcYm90X1xcc2ltIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzEsMiwiXFxQaV9cXHNpbSJdXQ==
\begin{tikzcd}[ampersand replacement=\&]
    {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^\bot)} \&\& {\mathbf{B}\hat{A}^*} \\
    \\
    \&\& {\mathbf{B}(\hat{A}^*/\sim)}
    \arrow["{L^\bot}", from=1-1, to=1-3]
    \arrow["{\exists ! \; L^\bot_\sim}"', dashed, from=1-1, to=3-3]
    \arrow["{\Pi_\sim}", from=1-3, to=3-3]
\end{tikzcd}
\end{equation}
commutes; in other words,
\begin{equation}
    L^{\bot}_{\sim} = \Pi_{\sim} \circ L^{\bot}.
\end{equation}
$L^{\bot}_{\sim}$ is the \emph{labelling functor under $\sim$} and it labels the morphisms in $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^\bot)$ with their associated equivalence classes in $\mathbf{B}(\hat{A}^{*}/\sim)$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Constructing the action functor under $\sim$.}
We can now reattach the action functor $A^{\bot}: \mathbf{B}\hat{A}^{*} \to \cat{Set}_{\bot}$ to our diagram and construct the unique functor $A^{\bot}_{\sim}: \mathbf{B}(\hat{A}^{*}/\sim) \to \cat{Set}_{\bot}$ using the universal property of coequalizers:
\begin{equation}
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXG1hdGhjYWx7S30iXSxbMiwwLCJcXHRleHRiZntCfVxcaGF0e0F9XnsqfSJdLFs0LDAsIlxcdGV4dGJme0J9KFxcaGF0e0F9XnsqfS9cXHNpbSkiXSxbNCwyLCJcXHRleHRiZntTZXR9X3tcXGJvdH0iXSxbMCwxLCJwXzEiLDAseyJvZmZzZXQiOi0xfV0sWzEsMiwiXFxQaV97XFxzaW19Il0sWzAsMSwicF97Mn0iLDIseyJvZmZzZXQiOjF9XSxbMSwzLCJBXntcXGJvdH0iLDJdLFsyLDMsIlxcZXhpc3RzICEgXFw7IEFee1xcYm90fV97XFxzaW19IiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
\begin{tikzcd}[ampersand replacement=\&]
    {\mathcal{K}} \&\& {\mathbf{B}\hat{A}^{*}} \&\& {\mathbf{B}(\hat{A}^{*}/\sim)} \\
    \\
    \&\&\&\& {\textbf{Set}_{\bot}}
    \arrow["{p_1}", shift left, from=1-1, to=1-3]
    \arrow["{p_{2}}"', shift right, from=1-1, to=1-3]
    \arrow["{\Pi_{\sim}}", from=1-3, to=1-5]
    \arrow["{A^{\bot}}"', from=1-3, to=3-5]
    \arrow["{\exists ! \; A^{\bot}_{\sim}}", dashed, from=1-5, to=3-5]
\end{tikzcd}
\end{equation}
The unique functor $A^{\bot}_{\sim}$ is the functor associated with the action of the quotient $\mathbf{B}(\hat{A}^{*}/\sim)$ on the set $W^{\bot}$:\footnote{
    From the equalization property of the coequalizer, we have
    \begin{equation}
        \Pi_{\sim} \circ p_{1} = \Pi_{\sim} \circ p_{2}.
    \end{equation}
    This means $\Pi_{\sim}$ sends $p_{1}(a)$ and $p_{2}(a')$ to the same place in $\mathbf{B}(\hat{A}^{*}/\sim)$ for every $a \in \hat{A}^{*}$ (i.e., $\Pi_{\sim}$ "coequalizes" them).
    
    From the universal property of the coequalizer, we have the unique functor
    \begin{equation}
        A^{\bot} = A^{\bot}_{\sim} \circ \Pi_{\sim}.
    \end{equation}
}
\begin{equation}
    A^{\bot}_{\sim}: \mathbf{B}(\hat{A}^{*}/\sim) \to \cat{Set}_{\bot}
\end{equation}
that acts as follows:
\begin{enumerate}
    \item \textbf{On objects:}
    The single object $\bullet$ is sent to $W$
    \begin{equation}
        A^{\bot}_{\sim}(\bullet) = W^{\bot};
    \end{equation}
    \item \textbf{On morphisms:}
    Each action $a \in \hat{A}^{*}$ in the equivalence class $[a]_{\sim} \in \hat{A}^{*}/\sim$ is sent to the function in $\cat{Set}_{\bot}$ with
    \begin{align}
        & A^{\bot}_{\sim}([a]_{\sim}): W \to W \text{ such that } \\
        & A^{\bot}_{\sim}([a]_{\sim})(w) = [a]_{\sim} \ast w = a \ast w.
    \end{align}
    Since $A^{\bot}(a)(w) = a \ast w$, we have
    \begin{align}
        & A^{\bot}_{\sim}([a]_{\sim})(w) = A^{\bot}(a)(w) \quad \text{for all $w \in W$} \\
        \implies & A^{\bot}_{\sim}([a]_{\sim}) = A^{\bot}(a).
    \end{align}
\end{enumerate}


\newthought{A summary of} the most significant categories and functors we have derived up in $\cat{Cat}$ to this point is given by:

\draftnote{purple}{To do}{
\begin{enumerate}
    \item Include a diagram with all categories and functors (including the non-totalised categories and totalising functors) we have derived in $\cat{Cat}$.
    \item Include a diagram also showing the relationship to the objects and morphisms in $\cat{Quiv}$.
    \item Talk about the different possible composite functor from $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ to $\cat{Set}_{\bot}$:
    \begin{equation}
        A^{\bot} \circ L^{\bot}: \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}) \to \cat{Set}_{\bot}
    \end{equation}
    and
    \begin{equation}
        A^{\bot}_{\sim} \circ \Pi_{\sim} \circ L^{\bot}: \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}) \to \cat{Set}_{\bot}
    \end{equation}
    \begin{enumerate}
        \item Are these two composite both unique ?
        \item How are they different ? Is it that $A^{\bot}_{\sim} \circ \Pi_{\sim} \circ L^{\bot}$ is faithful, while $A^{\bot} \circ L^{\bot}$ isn't because $A^{\bot} \circ L^{\bot}$ maps actions with the same representation in $\cat{Set}$ to the same elements) ?
    \end{enumerate}
\end{enumerate}
}

\begin{equation}
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXG1hdGhjYWx7Rn0oXFxoYXR7XFxtYXRoc2Nye1d9fV97XFxtYXRoc2Nye0F9fV57XFxib3R9KSJdLFsyLDAsIlxcbWF0aGJme0J9XFxoYXR7QX1eeyp9Il0sWzQsMCwiXFxtYXRoYmZ7Qn0oXFxoYXR7QX1eeyp9L1xcc2ltKSJdLFsyLDIsIlxcbWF0aGJme1NldH1fe1xcYm90fSJdLFswLDEsIkxee1xcYm90fSJdLFsxLDMsIkFee1xcYm90fSJdLFsxLDIsIlxcUGlfe1xcc2ltfSJdLFsyLDMsIkFee1xcYm90fV97XFxzaW19Il1d
\begin{tikzcd}[ampersand replacement=\&]
    {\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})} \&\& {\mathbf{B}\hat{A}^{*}} \&\& {\mathbf{B}(\hat{A}^{*}/\sim)} \\
    \\
    \&\& {\mathbf{Set}_{\bot}}
    \arrow["{L^{\bot}}", from=1-1, to=1-3]
    \arrow["{\Pi_{\sim}}", from=1-3, to=1-5]
    \arrow["{A^{\bot}}", from=1-3, to=3-3]
    \arrow["{A^{\bot}_{\sim}}", from=1-5, to=3-3]
\end{tikzcd}
\end{equation}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{
Categorification of invertibility
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Recap.}
An action $a \in \hat{A}^{*}$ is 
\begin{enumerate}
    \item \textbf{left invertible} from a world state $w \in W$ if there exists an action $a' \in \hat{A}^{*}$ such that
    \begin{equation}
        a' \ast (a \ast w) = w.
    \end{equation}
    An action that is left invertible from $w$ is also called \emph{reversible} from $w$;
    
    \item \textbf{right invertible} from a world state $w \in W$ if there exists an action $a' \in \hat{A}^{*}$ such that
    \begin{equation}
        a \ast (a' \ast w) = w;
    \end{equation}

    \item \textbf{full invertible} from a world state $w \in W$ if it is both left invertible from $w$ and right invertible from $w$.
\end{enumerate}
The invertibility of an action is
\begin{enumerate}
    \item \textbf{global} if it is left/right/fully invertible from all $w \in W$, but not necessarily by using the same $a'$.

    \item \textbf{consistently global} if it is globally left/right/fully invertible using the same $a'$; for example, an action $a \in \hat{A}^{*}$ is consistently globally left invertible if 
    \begin{equation}
        a' \ast (a \ast w) = w \quad \text{for all $w \in W$}.
    \end{equation}
\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Categorical conversion.}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\draftnote{purple}{(PS) To do}{
\begin{enumerate}
    \item Check.
    \item What is local invertibility ?
\end{enumerate}
}
\newthought{So far we} have come across three categorified structures that describe the dynamics of the world: (1) the free category $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$, which describes the syntactic and semantic structure of transformations, (2) the free monoid $\mathbf{B}\hat{A}^{*}$, which describes the syntactic structure of actions\footnote{
    The syntactic structure provided to $\mathbf{B}\hat{A}^{*}$ by $L^{\bot}$ is the same no matter the semantic structure of $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$, and so $\mathbf{B}\hat{A}^{*}$ contains no information about the structure of the world including the invertibility of actions in the world.
}, and (3) the quotient $\mathbf{B}(\hat{A}^{*}/\sim)$, which describes the syntactic and global semantic structure of actions.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Reversibility in $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$.}
\newthought{Reversibility and irresistibility} are properties of transformations and therefore translate to properties of morphisms in $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$.
An action $a \in \hat{A}^{*}$ is \emph{reversible from a world state $w \in W^{\bot}$} if there exists a morphism $d': w \to a \ast w$ in $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$:
\begin{equation}
    % https://q.uiver.app/#q=WzAsNCxbMSwwLCJ3Il0sWzMsMCwiYSBcXGFzdCB3Il0sWzUsMCwidyJdLFswLDAsIlxcdGV4dHtJbiB9IFxcbWF0aGNhbHtGfShcXGhhdHtcXG1hdGhzY3J7V319X3tcXG1hdGhzY3J7QX19XntcXGJvdH0pOiJdLFswLDEsImQiXSxbMSwyLCJkJyJdXQ==
\begin{tikzcd}[ampersand replacement=\&]
    {\text{In } \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}):} \& w \&\& {a \ast w} \&\& w
    \arrow["d", from=1-2, to=1-4]
    \arrow["{d'}", from=1-4, to=1-6]
\end{tikzcd}
\end{equation}
If no such morphism exists, then the action $a \in \hat{A}^{*}$ is \emph{irreversible from the world state $w \in W^{\bot}$}.

\draftnote{blue}{Consider}{
Since $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ is the free category over the underlying quiver, there are no relations between morphisms and so there are is no concept of equivalence of morphisms.
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{
Global consistent invertibility as a representation in $\cat{Set}_{\bot}$.
}
\newthought{An action $a \in \hat{A}^{*}$ viewed} as a morphism in $\mathbf{B}\hat{A}^{*}$ is represented as a function $A^{\bot}(a): W^{\bot} \to W^{\bot}$.

An action $a \in \hat{A}^{*}$ is consistently globally left invertible in $\cat{Set}_{\bot}$ if there exists an action $a' \in \hat{A}^{*}$ such that the following diagram commutes:
\begin{equation}
    % https://q.uiver.app/#q=WzAsNCxbMSwwLCJXXntcXGJvdH0iXSxbMywwLCJXXntcXGJvdH0iXSxbNSwwLCJXXntcXGJvdH0iXSxbMCwwLCJcXHRleHR7SW4gfSBcXGNhdHtTZXR9X3tcXGJvdH06Il0sWzAsMSwiQV57XFxib3R9KGEpIl0sWzEsMiwiQV57XFxib3R9KGEnKSJdLFswLDIsIlxcdGV4dHtpZH1fVyIsMix7ImN1cnZlIjozfV1d
\begin{tikzcd}[ampersand replacement=\&]
    {\text{In } \cat{Set}_{\bot}:} \& {W^{\bot}} \&\& {W^{\bot}} \&\& {W^{\bot}}
    \arrow["{A^{\bot}(a)}", from=1-2, to=1-4]
    \arrow["{\text{id}_W}"', curve={height=18pt}, from=1-2, to=1-6]
    \arrow["{A^{\bot}(a')}", from=1-4, to=1-6]
\end{tikzcd}
\end{equation}
which means
\begin{equation}
    A^{\bot}(a') \circ A^{\bot}(a) = \text{id}_{W^{\bot}},
\end{equation}
where $a'$ is called the global left inverse of $a$.
In other words, the morphism $A^{\bot}(a): W^{\bot} \to W^{\bot}$ is a \emph{split monomorphism} in $\cat{Set}_{\bot}$.

An action $a \in \hat{A}^{*}$ viewed as a morphism in $\mathbf{B}\hat{A}^{*}$ is consistently globally right invertible in $\cat{Set}_{\bot}$ if there exists an action $a' \in \hat{A}^{*}$ such that the following diagram commutes:
\begin{equation}
    % https://q.uiver.app/#q=WzAsNCxbMSwwLCJXXntcXGJvdH0iXSxbMywwLCJXXntcXGJvdH0iXSxbNSwwLCJXXntcXGJvdH0iXSxbMCwwLCJcXHRleHR7SW4gfSBcXGNhdHtTZXR9X3tcXGJvdH06Il0sWzAsMSwiQV57XFxib3R9KGEnKSJdLFsxLDIsIkFee1xcYm90fShhKSJdLFswLDIsIlxcdGV4dHtpZH1fVyIsMix7ImN1cnZlIjozfV1d
\begin{tikzcd}[ampersand replacement=\&]
    {\text{In } \cat{Set}_{\bot}:} \& {W^{\bot}} \&\& {W^{\bot}} \&\& {W^{\bot}}
    \arrow["{A^{\bot}(a')}", from=1-2, to=1-4]
    \arrow["{\text{id}_W}"', curve={height=18pt}, from=1-2, to=1-6]
    \arrow["{A^{\bot}(a)}", from=1-4, to=1-6]
\end{tikzcd}
\end{equation}
which means
\begin{equation}
    A^{\bot}(a) \circ A^{\bot}(a') = \text{id}_{W^{\bot}},
\end{equation}
where $a'$ is called the global right inverse of $a$.
In other words, the morphism $A^{\bot}(a): W^{\bot} \to W^{\bot}$ is a \emph{split epimorphism} in $\cat{Set}_{\bot}$.

An action $a \in \hat{A}^{*}$ viewed as a morphism in $\mathbf{B}\hat{A}^{*}$ is consistently globally fully invertible in $\cat{Set}_{\bot}$ if there exists an action $a' \in \hat{A}^{*}$ such that
\begin{align}
    & A^{\bot}(a') \circ A^{\bot}(a) = \text{id}_{W^{\bot}} \\
    & A^{\bot}(a) \circ A^{\bot}(a') = \text{id}_{W^{\bot}},
\end{align}
where $a'$ is called the global full inverse of $a$.
In other words, the morphism $A^{\bot}(a): W^{\bot} \to W^{\bot}$ is an \emph{isomorphism} in $\cat{Set}_{\bot}$.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{
Global consistent invertibility in $\mathbf{B}(\hat{A}^{*}/\sim)$.
}
\newthought{In $\mathbf{B}(\hat{A}^{*}/\sim)$ every morphism} represents a global action.

A morphism $[a]_{\sim}$ in $\mathbf{B}(\hat{A}^{*}/\sim)$ is consistently globally left invertible in $\mathbf{B}(\hat{A}^{*}/\sim)$ if there exists a morphism $[a']_{\sim}$ in $\mathbf{B}(\hat{A}^{*}/\sim)$ such that the following diagram commutes:
\begin{equation}
    % https://q.uiver.app/#q=WzAsNCxbMSwwLCJcXGJ1bGxldCJdLFszLDAsIlxcYnVsbGV0Il0sWzUsMCwiXFxidWxsZXQiXSxbMCwwLCJcXHRleHR7SW4gfSBcXHRleHRiZntCfShcXGhhdHtBfV57Kn0vXFxzaW0pOiJdLFswLDEsIlthXV97XFxzaW19Il0sWzEsMiwiW2EnXV97XFxzaW19Il0sWzAsMiwiW1xcdmFyZXBzaWxvbl1fe1xcc2ltfSIsMix7ImN1cnZlIjozfV1d
\begin{tikzcd}[ampersand replacement=\&]
    {\text{In } \mathbf{B}(\hat{A}^{*}/\sim):} \& \bullet \&\& \bullet \&\& \bullet
    \arrow["{[a]_{\sim}}", from=1-2, to=1-4]
    \arrow["{[\varepsilon]_{\sim}}"', curve={height=18pt}, from=1-2, to=1-6]
    \arrow["{[a']_{\sim}}", from=1-4, to=1-6]
\end{tikzcd}
\end{equation}
which means
\begin{equation}
    [a']_{\sim} \circ_{\sim} [a]_{\sim} = [\epsilon]_{\sim},
\end{equation}
where $[a']_{\sim}$ is called the global left inverse of $[a]_{\sim}$.
In other words, the morphism $[a]_{\sim}: \bullet \to \bullet$ is a \emph{split monomorphism} in $\mathbf{B}(\hat{A}^{*}/\sim)$.

A morphism $[a]_{\sim}$ in $\mathbf{B}(\hat{A}^{*}/\sim)$ is consistently globally right invertible in $\mathbf{B}(\hat{A}^{*}/\sim)$ if there exists a morphism $[a']_{\sim}$ in $\mathbf{B}(\hat{A}^{*}/\sim)$ such that the following diagram commutes:
\begin{equation}
    % https://q.uiver.app/#q=WzAsNCxbMSwwLCJcXGJ1bGxldCJdLFszLDAsIlxcYnVsbGV0Il0sWzUsMCwiXFxidWxsZXQiXSxbMCwwLCJcXHRleHR7SW4gfSBcXHRleHRiZntCfShcXGhhdHtBfV57Kn0vXFxzaW0pOiJdLFswLDEsIlthJ11fe1xcc2ltfSJdLFsxLDIsIlthXV97XFxzaW19Il0sWzAsMiwiW1xcdmFyZXBzaWxvbl1fe1xcc2ltfSIsMix7ImN1cnZlIjozfV1d
\begin{tikzcd}[ampersand replacement=\&]
    {\text{In } \mathbf{B}(\hat{A}^{*}/\sim):} \& \bullet \&\& \bullet \&\& \bullet
    \arrow["{[a']_{\sim}}", from=1-2, to=1-4]
    \arrow["{[\varepsilon]_{\sim}}"', curve={height=18pt}, from=1-2, to=1-6]
    \arrow["{[a]_{\sim}}", from=1-4, to=1-6]
\end{tikzcd}
\end{equation}
which means
\begin{equation}
    [a]_{\sim} \circ_{\sim} [a']_{\sim} = [\epsilon]_{\sim},
\end{equation}
where $[a']_{\sim}$ is called the global right inverse of $[a]_{\sim}$.
In other words, the morphism $[a]_{\sim}: \bullet \to \bullet$ is a \emph{split epimorphism} in $\mathbf{B}(\hat{A}^{*}/\sim)$.

A morphism $[a]_{\sim}$ in $\mathbf{B}(\hat{A}^{*}/\sim)$ is consistently globally fully invertible in $\mathbf{B}(\hat{A}^{*}/\sim)$ if there exists a morphism $[a']_{\sim}$ in $\mathbf{B}(\hat{A}^{*}/\sim)$ such that:
\begin{align}
    & [a']_{\sim} \circ_{\sim} [a]_{\sim} = [\epsilon]_{\sim} \\
    & [a]_{\sim} \circ_{\sim} [a']_{\sim} = [\epsilon]_{\sim},
\end{align}
where $[a']_{\sim}$ is called the global full inverse of $[a]_{\sim}$.
In other words, the morphism $[a]_{\sim}: \bullet \to \bullet$ is an \emph{isomorphism} in $\mathbf{B}(\hat{A}^{*}/\sim)$.

\whendraft{
\draftnote{red}{Inside whendraft}{}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Isomorphisms as natural transformations.}


\draftnote{blue}{Info}{
\begin{enumerate}
    \item Any assignment that is defined on each object in a way that is compatible with the morphisms (i.e. any \emph{consistent global condition}) automatically yields a natural transformation.
    \item When an actions effect is the same across all morphisms (or is preserved under every structural change in the category), then the assignment
    \begin{equation}
        c\mapsto A^{\bot}_{\sim}([a]_\sim)\big|_{F(c)}
    \end{equation}
    is natural.
    \item In the special case when $\mathcal{C}$ is the delooping of a monoid (a one-object category), every action automatically induces a natural transformation. In the multi-object case the naturality condition ensures that the property is uniformly defined across all objects. 
    \item If a global condition is consistent and functorial, it can be turned into a natural transformation. This is precisely because the naturality condition is the mathematical formalization of the notion that the condition is preserved under the action of every morphism in the category.
    \item Non-Functorial Properties: Properties that cannot be expressed as relationships between functors (e.g., ad-hoc constraints not preserved under morphisms) do not correspond to natural transformations.
    \item Non-Uniformity: Properties that vary across states violate naturality conditions.
\end{enumerate}
}

\draftnote{red}{Approach}{
I'm currently leaning towards every action inducing a natural transformation:
"
In the functor category $[\mathbf{B}\hat{A}^{*}, \cat{Set}_{\bot}]$, each action $a \in \hat{A}^{*}$ corresponds to a natural transformation
\begin{equation}
    \eta_{a}: A^{\bot} \Rightarrow A^{\bot}
\end{equation}
with components
\begin{equation}
    \eta_{a}(w) = A^{\bot}(a)(w) = a \ast^{\bot} w
\end{equation}
for $w \in W$.
\draftnote{blue}{Consider}{
Are we sure the components of $\eta_{a}: A \Rightarrow A$ are $\eta_{w}$ and not $\eta_{a}$ ?
}
"
\begin{enumerate}
    \item Is every action actually the component of a natural transformation and is that natural transformation $\eta: A^{\bot} \Rightarrow A^{\bot}_{\sim}$ ?
    \begin{enumerate}
        \item This might be true for every action in the case of $\mathbf{B}(\hat{A}^{*}/\sim)$ being a monoid, but not for the case of $\mathbf{B}(\hat{A}^{*}/\sim)$ being a multi-object small category.
        \item For $(\hat{A}^{*}/\sim)$ being a monoid is there a special case where each action induces a natural transformation or is this a consequence of all morphisms being of the form $a: \bullet \to \bullet$ in the single-object case ?
        \item "The component of the natural transformation corresponding to an action is exactly the function that $A^{\bot}_{\sim}$ assigns to that action."
    \end{enumerate}
    \item Is it the case that consistent global properties correspond to natural transformations, but properties that are not consistent and global do not ?
    \begin{enumerate}
        \item Check for multi-object case first.
        \item Do congruences induce natural transformations ?
    \end{enumerate}
\end{enumerate}
}
\draftnote{red}{End of whendraft}{}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{
The action functor with a general category as a target
}
\draftnote{blue}{Consider}{
Move into later section about extensions then add something about embeddings (representations) in $\cat{Vect}$.
}
\draftnote{purple}{To do}{
\begin{enumerate}
    \item Check.
    \item Functorial action $\mathcal{A}^{\bot}: \mathbf{B}\hat{A}^{*} \times \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot}) \to \mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$.
\end{enumerate}
}
\newthought{In categorical terms,} the totalised action effect operator $\ast^{\bot}: \hat{A}^{*} \times W^{\bot} \to W^{\bot}$ is encoded as a functor $A^{\bot}$ from the one-object category $\mathbf{B}\hat{A}^{*}$ into a target category, which up until now has been $\cat{Set}_{\bot}$.

However, we can replace $\cat{Set}_{\bot}$ with a category $\mathcal{D}$ containing an object $X$; in this case, our action effect operator $\ast^{\bot}$ becomes a morphism
\begin{equation}
    \ast^{\bot}: \hat{A}^{*} \times X \to X
\end{equation}
in $\mathcal{D}$ where $X$ is an object in $\mathcal{D}$.
The set $\mathcal{D}$ needs to have products, so that $\ast^{\bot}$ can be interpreted as a morphism in $\mathcal{D}$, and a notion of a basepoint, so that totalisation can have occurred.

From the morphism $\ast^{\bot}$ we define, for each $a \in \hat{A}^{*}$, an endomorphism
\begin{equation}
    \phi(a): X \to X
\end{equation}
\draftnote{purple}{(PS) Consider}{
Is $\phi(a): X \to X$ always constructed by setting $\phi(a)(x) := a \ast^{\bot} x$ ?
}
Combining all the $\phi(a)$, we can construct the monoid homomorphism
\begin{equation}
    \phi: \hat{A}^{*} \to \text{End}_{\mathcal{D}}(X).
\end{equation}
which we then use to construct the appropriate action functor
\begin{equation}
    A^{\bot}: \mathbf{B}\hat{A}^{*} \to \mathcal{D}
\end{equation}
by defining that it acts as follows:
\begin{enumerate}
    \item \textbf{On objects:}
    \begin{equation}
        \mathcal{A}^{\bot}(\bullet) := X.
    \end{equation}
    \item \textbf{On morphisms:}
    \begin{equation}
        A^{\bot}(a) := \phi(a) \quad \text{for all $a \in \hat{A}^{*}$}.
    \end{equation}
\end{enumerate}
$\mathcal{A}^{\bot}$ provides a representation of the monoid $\mathbf{B}\hat{A}^{*}$ in $\mathcal{D}$.

There are two options for the construction of $\phi$:
\begin{enumerate}
    \item \textbf{$X^{X}$ exists as an object in $\mathcal{D}$.}
    If $X^{X}$ exists as an object in $\mathcal{D}$ (e.g., if $\mathcal{D}$ is Cartesian closed), then we can use the canonical exponential adjunction to curry the action $\ast^{\bot}$ inside $\mathcal{D}$ as
    \begin{equation}
        \tilde{\ast}^{\bot}: \hat{A} \to X^{X},
    \end{equation}
    where $X^{X}$ is is the object that internalises the set of endomorphism of $X$.
    In general,\draftnote{purple}{(PS)}{Prove this as a footnote: take the natural isomorphism for currying, then evaluate $\text{Hom}_{\mathcal{D}}(1, X^{X})$, where $1$ is the terminal object of $\mathcal{D}$.}
    \begin{equation}
        X^{X} \cong \text{End}(X)
    \end{equation}
    and so $\tilde{\ast}^{\bot}$ and $\phi$ have equivalent data
    \begin{equation}
        \text{Hom}_{\mathcal{D}}(1, X^{X}) \cong \text{End}_{\mathcal{D}}(X).
    \end{equation}
    
    \item \textbf{$X^{X}$ does not exist as an object in $\mathcal{D}$.}
    If $\mathcal{D}$ is not Cartesian closed, then for a given object $X \in \mathcal{D}$, the exponential object $X^{X}$ might not exist in $\mathcal{D}$.
    If $X^{X}$ does not exist as an object in $\mathcal{D}$, then we cannot canonically curry $X$ directly inside $\mathcal{D}$; in other words, we cannot use currying to internalise the endomorphism object (i.e., the assignment $a \mapsto \phi(a)$) as an object in $\mathcal{D}$, and so we must construct the functor $A^{\bot}$ externally at the level of Hom-sets by defining a monoid homomorphism
    \begin{equation}
        \phi: \hat{A}^{*} \to \text{End}_{\mathcal{D}}(X).
    \end{equation}
    
    If we can fully faithfully embed $X$ into a Cartesian closed category $\mathcal{G}$ through a functor $y$    \footnote{
        If $\mathcal{D}$ is small, then we can always fully faithfully embed it into its presheaf category $\cat{Set}^{\mathcal{D}^{\text{op}}}$, which is Cartesian closed, via the Yoneda embedding:
        \begin{equation}
            y: \mathcal{D} \to \cat{Set}^{\mathcal{D}^{\text{op}}}.
        \end{equation}
    }, then we can curry the embedded object $y(X)$ in $\mathcal{G}$ that corresponds to $X$ before trying to lift the result $y(X)^{y(X)}$ back into $\mathcal{D}$\footnote{
        This is what we did to curry the action $\ast^{\bot}$ in $\cat{Set}_{\bot}$.
    }; a canonical lifting of $y(X)^{y(X)}$ back into $\mathcal{D}$ is only possible if $y(X)^{y(X)}$ is isomorphic to a representable functor in $\mathcal{D}$.

    If an appropriate embedding and lifting cannot be found then, it might be possible to explicitly construct the functor $\mathcal{A}^{\bot}: \mathbf{B}\hat{A}^{*} \to \mathcal{D}$ by separately defining the object assignment and the morphism assignment.
\end{enumerate}

\draftnote{purple}{(PS) Include}{
If $\mathcal{D}$ is anything that isn't $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ then some information about the structure of $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^{\bot})$ will be lost when the composite functor $A^{\bot} \circ L^{\bot}$ is applied.
}

\draftnote{purple}{Include}{
When generalising to a category $\mathcal{D}$, if $\mathcal{D}$ lacks exponentials, then define
\begin{equation}
    \phi: \hat{A}^{*} \to \text{End}_{\mathcal{D}}(X)
\end{equation}
externally.
If $\mathcal{D}$ embeds into a Cartesian closed category $\mathcal{G}$ (e.g., via Yoneda), then curry in $\mathcal{G}$ and restrict to $\mathcal{D}$.
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Changing perspective}
\draftnote{red}{Consider}{
\begin{itemize}
    \item Restriction categories \cite{j_r_b_cockett2002restriction}.
    \item The labelling map functor $L$ might be different for the multi-object category case.
    \item Getting single-object categories form multi-object categories
    \begin{enumerate}
        \item When $\mathbf{B}\hat{A}^{*}$ is a group, do we actually go from $\mathbf{B}\hat{A}^{*}$ as a groupoid then notice that the actions are all globally consistent and invertible (i.e., the relevant natural transformations exist); at that point we can "glue" the different world states of the groupoid together to get a group.
        \item Similar argument for monoid: When $\mathbf{B}\hat{A}^{*}$ is a group, do we actually go from $\mathbf{B}\hat{A}^{*}$ as a small category then notice that the actions are all globally consistent (i.e., the relevant natural transformations exist); at that point we can "glue" the different world states of the small category together to get a monoid.
    \end{enumerate}
\end{itemize}
}

\draftnote{red}{Structure}{
\begin{enumerate}
    \item Here we want to view the delooped category $\mathbf{B}(\hat{A}^{*}/\sim)$ as a multi-object small category that acts on $W$ (not $W^{\bot}$.
    \item Therefore the action functor $A$ should be something like
    \begin{equation}
        A: \mathbf{B}(\hat{A}^{*}/\sim) \to \cat{Set}.
    \end{equation}
    \item Isomorphisms still correspond to natural transformations when $\mathbf{B}(\hat{A}^{*}/\sim)$ has multiple objects ?
\end{enumerate}
}
\draftnote{green}{DIVIDER}{}
\draftnote{purple}{(PS) To do}{
\begin{enumerate}
    \item Outline the step-by-step used to get $A_{\sim}$ + why we can reuse previous mechanisms used on totalised structures to get 
    \begin{enumerate}
        \item Give summary diagram with all the non-totalised structures + maps.
    \end{enumerate}
    \item Link to the relevant sections on "A different perspective" in chapter 2 (?)
    \item Define $\cat{Par(Set)}$ in footnote.
    \begin{enumerate}
        \item $\cat{Par(Set)}$ as a restriction category.
        \item Change notation from $\cat{Par(Set)}$ to $\cat{Set}_{p}$ ?
    \end{enumerate}
    \item The connection with the Grothendieck construction of the partial action functor: $\mathbf{B}^{+}(\hat{A}^{*}/\sim)$ is isomorphic to the Grothendieck construction of the functor $A_{\sim}: \mathbf{B}(\hat{A}^{*}/\sim) \to \cat{Par(Set))}$.
    \item Worked example in $\cat{Set}$.
    \begin{enumerate}
        \item Come up with a single example that can be used to illustrate this perspective and the other perspective.
    \end{enumerate}
\end{enumerate}
}
\draftnote{orange}{To do (other sections)}{
\begin{enumerate}
    \item If we apply the interpretation of the equivalence relation $\sim$ on transformations to the category  $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^\bot)$ of world states, then (I think) $\mathcal{F}(\hat{\mathscr{W}}_{\mathscr{A}}^\bot)$ looks exactly like the underlying quiver $\hat{\mathscr{W}}_{\mathscr{A}}^\bot$ (but with composition between transformations ?).
    \item Preliminaries
    \begin{enumerate}
        \item Splitting idempotents - Karoubi envelope as universal construction where all idempotents split.
    \end{enumerate}
\end{enumerate}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Recap}

Previously, we took the (partial) action effect operator
\begin{equation}
  \ast: \hat{A}^{*} \times W \to W,
\end{equation}
which is a partial map, and then totalised it to give 
\begin{equation}
    \ast^{\bot}: \hat{A}^{*} \times W^{\bot} \to W^{\bot};
\end{equation}
then we categorified $\ast^{\bot}$ into the totalised action functor
\begin{equation}
    A^{\bot}: \mathbf{B}\hat{A}^{*} \to \cat{Set}_{\bot},
\end{equation}
where $\mathbf{B}\hat{A}^{*}$ is a single-object category (i.e., a monoid).
Next, we applied the equivalence relation $\sim$ by factoring through the functor $\Pi_{\sim}: \mathbf{B}\hat{A}^{*} \to \mathbf{B}(\hat{A}^{*}/\sim)$ to give the totalised action functor $A^{\bot}_{\sim}$ under $\sim$:
\begin{equation}
    A^{\bot}_{\sim}: \mathbf{B}(\hat{A}^{*}/\sim) \to \cat{Set}_{\bot},
\end{equation}
where $\mathbf{B}(\hat{A}^{*}/\sim)$ is a a single-object category (i.e., a monoid).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{A different approach}
In this section, we take a different approach and don't totalise $\ast$; this will lead us to a different perspective on the action functor.
Without totalisation, $\ast$ becomes categorified to the action functor
\begin{equation}
    A: \mathbf{B}\hat{A}^{*} \to \cat{Par(Set)},
\end{equation}
where $\cat{Par(Set)}$ is the category of sets and partial functions.
We then apply equivalence relation $\sim$ by factoring through the functor $\Pi_{\sim}: \mathbf{B}\hat{A}^{*} \to \mathbf{B}(\hat{A}^{*}/\sim)$ to give the action functor under $\sim$
\begin{equation}
    A_{\sim}: \mathbf{B}(\hat{A}^{*}/\sim) \to \cat{Par(Set)},
\end{equation}
where, for each $a \in \hat{A}^{*}$, $A_{\sim}(a)$ is a partial function
\begin{equation}
    A_{\sim}(a): W \rightharpoonup W
\end{equation}
from $\text{dom}(A_{\sim}(a)) \subseteq W$ to $W$.

We will then reinterpret the action functor $A_{\sim}$ of the action of the monoid $\mathbf{B}(\hat{A}^{*}/\sim)$ on the category $\cat{Par(Set)}$ as the functor 
\begin{equation}
    A^{+}_{\sim}: \mathbf{B}^{+}(\hat{A}^{*}/\sim) \to \cat{Set}
\end{equation}
of the action of a multi-object category $\mathbf{B}^{+}(\hat{A}^{*}/\sim)$ on the set $W$ of world states in $\cat{Set}$; for each $[a]_{\sim} \in \hat{A}^{*}/\sim$, $A_{\sim}([a]_{\sim})$ is a partial function
\begin{equation}
    A_{\sim}([a]_{\sim}): W \rightharpoonup W
\end{equation}
from $W$ to $W$.

We will obtain the multi-object category $\mathbf{B}^{+}(\hat{A}^{*}/\sim)$ by \emph{splitting the restriction idempotents}\footnote{
    In technical terms, this involves passing $\cat{Par(Set)}$ to its Karoubi envelope, which is the universal category where all idempotents split; in other words, for a category $\mathcal{C}$, there's a functor
    \begin{equation}
        \mathcal{C} \to \text{Kar}(\mathcal{C}),
    \end{equation}
    where $\text{Kar}(\mathcal{C})$ is the Karoubi envelope of $\mathcal{C}$, and this functor is fully faithful and initial among all functors from $\mathcal{C}$ into categories where idempotents split.
} in $\cat{Par(Set)}$; this replaces the single object $W$ in $\cat{Par(Set)}$ by its subobjects that are the domains on which the partial maps $A_{\sim}([a]_{\sim})$ are defined.
This process lifts the action functor to the \emph{split action functor}
\begin{equation}
    A^{+}_{\sim}: \mathbf{B}^{+}(\hat{A}^{*}/\sim) \to \cat{Set},
\end{equation}
where, for each $a \in \hat{A}^{*}/\sim$, $A^{+}_{\sim}([a]_{\sim})$ is a total function.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Splitting the restriction idempotents.}

Each partial function $f: W \rightharpoonup W$ in $\cat{Par(Set)}$ comes with a \emph{restriction idempotent}\footnote{
    A \emph{restriction idempotent} $\overline{f}: A \rightharpoonup A$ is a partial identity function on $A$ that is defined only on the domain of $f$:
    \begin{equation}
        \overline{f}(a) = 
        \begin{cases}
            a & \text{if } a \in \operatorname{dom}(f) \\
            \text{undefined} & \text{otherwise}
        \end{cases}
    \end{equation}
}
\begin{equation}
    \overline{f}: W \to W,
\end{equation}
which is the partial identity on $\operatorname{dom}(f) \subseteq W$.

To split these idempotents\footnote{
    An idempotent $e : X \to X$ \emph{splits} if there exists:
    \begin{itemize}
      \item An object $Y$,
      \item A morphism $r : X \to Y$ \textbf{(retraction)},
      \item A morphism $s : Y \to X$ \textbf{(section)},
    \end{itemize}
    such that:
    \begin{align}
        & e = s \circ r \quad &\text{(Factorization)} \\
        & r \circ s = \mathrm{id}_Y \quad &\text{(Y is a retract of X)}.
    \end{align}
}, we pass to the Karoubi envelope of $\cat{Par(Set)}$; this process replaces the object $W$ by a collection of pairs $(W, e)$
\begin{equation}
    W \mapsto (W, e),
\end{equation}
where $e: W \to W$ is a restriction idempotent that splits as
\begin{align}
    & e = i \circ r \\
    & r \circ i = \text{id}_{\text{dom}(f)},
\end{align}
with $i : \text{dom}(f) \hookrightarrow W$ and $r : W \to \text{dom}(f)$.
This means the single object $W$ in $\cat{Par(Set)}$ splits into the collection of its subobjects given by
\begin{equation}
    \{\text{dom}([a]_{\sim}\ast(-)) \mid [a]_{\sim} \in \hat{A}^{*}/\sim\}.
\end{equation}

 Using the universal property of the Karoubi envelope, the functor
\begin{equation}
    A_{\sim} : \mathbf{B}(\hat{A}^{*}/\sim) \to \cat{Par(Set)}
\end{equation}
factorises through this splitting, to give the unique functor
\begin{equation}
    A^{+}_{\sim}: \mathbf{B}^{+}(\hat{A}^{*}/\sim) \to \cat{Set}
\end{equation}
as shown in the following diagram:
\begin{equation}
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXG1hdGhiZntCfShcXGhhdHtBfV4qL3tcXHNpbX0pIl0sWzIsMCwiXFxjYXR7UGFyKFNldCl9Il0sWzAsMiwiXFxtYXRoYmZ7Qn1eKyhcXGhhdHtBfV4qL3tcXHNpbX0pIl0sWzIsMiwiXFxjYXR7U2V0fSJdLFswLDEsIkFfXFxzaW0iXSxbMCwyLCJcXGlvdGEiLDJdLFsxLDMsIlxcbWF0aHJte0thcn0iXSxbMiwzLCJcXGV4aXN0cyAhIFxcOyBBXitfXFxzaW0iLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
\begin{tikzcd}[ampersand replacement=\&]
    {\mathbf{B}(\hat{A}^*/{\sim})} \&\& {\cat{Par(Set)}} \\
    \\
    {\mathbf{B}^+(\hat{A}^*/{\sim})} \&\& {\cat{Set}}
    \arrow["{A_\sim}", from=1-1, to=1-3]
    \arrow["\iota"', from=1-1, to=3-1]
    \arrow["{\mathrm{Kar}}", from=1-3, to=3-3]
    \arrow["{\exists ! \; A^+_\sim}"', dashed, from=3-1, to=3-3]
\end{tikzcd}
\end{equation}
such that
\begin{equation}
    A^{+}_{\sim} \circ \iota = \text{Kar} \circ A_{\sim}
\end{equation}
where $\mathbf{B}^{+}(\hat{A}^{*}/\sim)$ is a multi-object category whose objects correspond to the subobjects of $W$ (i.e., the domains of definition of the partial functions $A_{\sim}([a]_{\sim})$), $\iota$ is the subcategory inclusion functor that embeds the single-object category $\mathbf{B}(\hat{A}^{*}/\sim)$ into the multi-object category $\mathbf{B}^{+}(\hat{A}^{*}/\sim)$, and $\text{Kar}$ is the Karoubi envelope construction functor.

\draftnote{blue}{To do}{
    Give the objects and morphisms of $\mathbf{B}^{+}(\hat{A}^{*}/\sim)$ explicitly.
}

The split action functor $A^{+}_{\sim}$ acts as follows:
\begin{enumerate}
    \item \textbf{On objects:}
    For each object $X \subseteq W$, where $X$ is a domain of definition,
    \begin{equation}
        A^{+}_{\sim}(X) = X.
    \end{equation}
    \item \textbf{On morphisms:}
    For each morphism corresponding to the restriction of the partial function $[a]_{\sim} \ast (-)$ to its domain $X$,
    \begin{align}
        & A^{+}_{\sim}([a]_{\sim}): X \to X' \quad \text{such that} \\
        & A^{+}_{\sim}([a]_{\sim})(d) = [a]_{\sim} \ast d,
    \end{align}
    where $A^{+}_{\sim}([a]_{\sim})$ is a total function on $X$.
\end{enumerate}

\draftnote{blue}{Consider}{
If we apply the forgetful functor $U$ to $A^{\bot}_{\sim}$ to give $A^{\bot}_{\sim}$ then we can have both perspective represented as embedding in $\cat{Set}$.
Can we form an adjunction between the perspectives ?
}
\draftnote{blue}{Include}{
Footnote about how the number of subobjects of $W$ is not necessarily equal to the number of world states in $W$ (e.g., there could be multiple world states on which all actions are defined; these world states would all be in the same subobject of $W$).
}




